(this["webpackJsonpclient-updated"]=this["webpackJsonpclient-updated"]||[]).push([[0],{121:function(e,t,n){e.exports=n(183)},126:function(e,t,n){},179:function(e,t){},183:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(60),o=n.n(i),s=(n(126),n(2)),c=n.n(s),u=n(5),d=n(1),l=(n(128),n(91)),h=n(78),p=n(86),f=n.n(p),m=n(88),b=n(77),v=n(39),y=n(4),g=n(6),x=n(19),k=n(14),w=n(15),O=n(58),j=n.n(O),R=function(e,t){return Math.round(Math.random()*(e-t+1)+t)},E=function(e,t,n){for(var a in t)"object"==typeof e?"function"===typeof e[a]?n[a]=e[a]:"undefined"!=typeof e[a]?n[a]=j.a.cloneDeep(e[a]):n[a]=j.a.cloneDeep(t[a]):n[a]=j.a.cloneDeep(t[a])},C=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},T=function(e,t,n,a){if(e===n&&t===a)return 0;if(e===n){if(t<a)return 270;if(t>a)return 90}if(t===a){if(e<n)return 0;if(n<e)return 180}var r=n-e,i=a-t,o=Math.atan(-i/r);return e<n&&t>a?A(o):e>n&&t>a||e>n&&t<a?180+A(o):e<n&&t<a?360+A(o):void 0},A=function(e){return 180*e/Math.PI},S=function(e){return e*Math.PI/180},I=function(e,t,n,a,r){return 0===r||360===r?[n,a]:P(e,t,T(e,t,n,a)+r,C(e,t,n,a))},P=function(e,t,n,a){var r=S(n),i=[0,90,180,270,360];if(-1!==i.indexOf(n)){var o=[[1,0],[0,1],[-1,0],[0,-1],[1,0]][i.indexOf(n)];return[e+o[0]*a,t-o[1]*a]}return[e+Math.cos(r)*a,t-Math.sin(r)*a]},M=function(e,t){var n=Object(d.a)(e,4),a=n[0],r=n[1],i=n[2],o=n[3],s=Object(d.a)(t,4),c=s[0],u=s[1],l=s[2],h=s[3];if(Math.round(a)===Math.round(i)||Math.round(c)===Math.round(l)){var p=I(0,0,a,r,30),f=Object(d.a)(p,2);a=f[0],r=f[1];var m=I(0,0,i,o,30),b=Object(d.a)(m,2);i=b[0],o=b[1];var v=I(0,0,c,u,30),y=Object(d.a)(v,2);c=y[0],u=y[1];var g=I(0,0,l,h,30),x=Object(d.a)(g,2);l=x[0],h=x[1]}var k=Math.min(a,i),w=Math.max(a,i),O=Math.min(c,l),j=Math.max(c,l),R=(r-o)/(a-i),E=(u-h)/(c-l),C=-a*R+r;if(R===E)return!1;var T=(-c*E+u-C)/(R-E);return T>k&&T<w&&T>O&&T<j&&[T,R*T+C]},D=function(e,t,n){var a=Object(d.a)(n,4),r=a[0],i=a[1],o=a[2],s=a[3],c=function(e,t,n,a,r,i){return Math.abs(T(e,t,r,i)-T(e,t,n,a))}(r,i,e,t,o,s),u=C(e,t,r,i),l=Math.abs(u*Math.cos(S(c))),h=Math.sqrt(Math.pow(u,2)-Math.pow(l,2));return!(l>C(r,i,o,s))&&(c=S(T(r,i,o,s)),[r+Math.cos(c)*l,i-Math.sin(c)*l,h])},B=function(e,t,n){var a=e.split("."),r=t;a.forEach((function(e,t){t===a.length-1?Array.isArray(r)?r[parseInt(e)]=n:r[e]=n:r=Array.isArray(r)?r[parseInt(e)]:r[e]}))},W=function(e,t){var n=e.split("."),a=t;return n.forEach((function(e){a=Array.isArray(a)?a[parseInt(e)]:t[e]})),a},L=n(30),N=n(41),V=n(40),X={inputReference:{}};X.inputReference.movementIndex=["w","a","s","d","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],X.inputReference.coeffIndex=[[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]],X.defaultAppConfig={initFunctions:["visualInit","mouseInputInit"],animateFunctions:["animate","update","render"],lastFrame:void 0,constantRender:!0,background:"black"},X.defaultObjectProps={shapes:[],animations:[],animationCount:0,initFunctions:["createPreloader"],static:!0,x:0,y:0,rotation:0,positionIndicator:!1,display:!0,opacity:1,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],zIndex:0},X.defaultShapeOptions={kind:"rect",animations:[],animationCount:0,x:0,y:0,rotation:0,color:"black",display:!0,lineWidth:1,opacity:1,borderColor:"yellow",borderWidth:10,border:!1,borderOnly:!1,shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]},X.defaultRectOptions={w:0,h:0,clip:!1,clipImageLink:null,clipCanvas:null},X.defaultArcOptions={rad:0,arcDegree:360},X.defaultTextOptions={textAlign:"left",font:"10px Ariel",text:"Hello World"},X.defaultImgOptions={spriteLink:null,drawWidth:null,drawHeight:null,loadedFunction:void 0},X.defaultPolyOptions={points:[],specialPolygon:!1,numberOfSide:0,radius:10,clip:!1,clipImageLink:null},X.defaultLineOptions={points:[]},X.apps=[],X.gameloop={list:[],frameTime:void 0,lastFrame:void 0},X.gameloop.loop=function(e){requestAnimationFrame(X.gameloop.loop);for(var t=0;t<X.gameloop.list.length;t++)X.gameloop.list[t](X.apps[t]);void 0!==e&&(X.lastFrame=X.frameTime,X.frameTime=e)},X.gameloop.loop(),X.app=function(e,t){var n=this;this.options={},E(t,X.defaultAppConfig,this.options),this.canvas=e,this.options.initFunctions.forEach((function(e){return n[e]()})),this.objects=[],X.gameloop.list.push(this.options.constantRender?this.turnFunctions:function(){}),X.apps.push(this)},X.app.prototype.turnFunctions=function(e){e.options.animateFunctions.forEach((function(t){return e[t]()}))},X.app.prototype.update=function(){this.objects.forEach((function(e){"function"===typeof e.update&&e.update(e)}))},X.app.prototype.translateMouseCoor=function(e){var t,n;return e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),[2*(t-=this.canvas.offsetLeft),2*(n-=this.canvas.offsetTop)]},X.objectCount=0,X.object=function(){function e(t,n){var a=this;Object(k.a)(this,e),X.objectCount++,this.id=X.objectCount,this.parent=n,this.parent.objects.push(this),E(t,X.defaultObjectProps,this),this.initFunctions.forEach((function(e){return a[e]()})),this.name=t.objectName?t.objectName:"Object ".concat(this.id)}return Object(w.a)(e,[{key:"collide",value:function(e){var t,n=Object(g.a)(this.shapes);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,i=Object(g.a)(e.shapes);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(r.collide(o))return!0}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"pointInObject",value:function(e,t){var n,a=Object(g.a)(this.shapes);try{for(a.s();!(n=a.n()).done;){if(n.value.pointInShape(e,t))return!0}}catch(r){a.e(r)}finally{a.f()}return!1}},{key:"findMax",value:function(){var e=[],t=[];return this.shapes.forEach((function(n){var a=n.findMax(),r=Object(d.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3];e=[].concat(Object(y.a)(e),[i,o]),t=[].concat(Object(y.a)(t),[s,c])})),[Math.min.apply(Math,Object(y.a)(e)),Math.max.apply(Math,Object(y.a)(e)),Math.min.apply(Math,Object(y.a)(t)),Math.max.apply(Math,Object(y.a)(t))]}},{key:"findThePositionThatIsRelativeToThisObjectFromAbsolutePosition",value:function(e,t){return[e-this.x,t-this.y]}}]),e}(),X.spriteLinkReference=[],X.spriteImageReference=[],X.funcLists=[],X.sprite=function(e,t){var n=X.spriteLinkReference.indexOf(e);if(-1!==n){var a=X.spriteImageReference[n];return X.funcLists[n].push(t),a}var r=new Image,i=X.spriteImageReference.length;return r.onload=function(){X.funcLists[i].forEach((function(e){return e()}))},X.funcLists[i]=[],X.funcLists[i].push(t),r.src=e,X.spriteLinkReference.push(e),X.spriteImageReference.push(r),r},X.shape=function(){function e(t,n){Object(k.a)(this,e),this.kind=t.kind,this.parent=n,this.parent.shapes.push(this),E(t,X.defaultShapeOptions,this)}return Object(w.a)(e,[{key:"kill",value:function(){this.parent.shapes.splice(this.parent.shapes.indexOf(this),1)}},{key:"findVertex",value:function(){return[]}},{key:"findMax",value:function(){var e=this.findVertex(),t=[],n=[];e.forEach((function(e){var a=Object(d.a)(e,2),r=a[0],i=a[1];t.push(r),n.push(i)}));var a=-this.borderWidthIfBorderIsOn,r=this.borderWidthIfBorderIsOn,i=-this.borderWidthIfBorderIsOn,o=this.borderWidthIfBorderIsOn;if(this.shadow){var s=-this.shadow.blur-2,c=this.shadow.blur+2,u=-this.shadow.blur-2,l=this.shadow.blur+2;this.shadow.offsetX&&(s+=this.shadow.offsetX,c+=this.shadow.offsetX),this.shadow.offsetY&&(u+=this.shadow.offsetY,l+=this.shadow.offsetY),s<0&&(a+=s),c>0&&(r+=c),u<0&&(i+=u),l>0&&(o+=l)}return[Math.min.apply(Math,t)+a,Math.max.apply(Math,t)+r,Math.min.apply(Math,n)+i,Math.max.apply(Math,n)+o]}},{key:"pointInShape",value:function(e,t){var n=this.findSides(),a=this.findMax(),r=Object(d.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3],u=[e,t,e+C(e,t,o,c),t],l=0;return!(e>o||e<i||t>c||t<s)&&(n.forEach((function(e){M(e,u)&&l++})),!(l%2===0))}},{key:"findSides",value:function(){for(var e=this.findVertex(),t=[],n=0;n<e.length;n++)t.push([].concat(Object(y.a)(e[n]),Object(y.a)(e[n+1]?e[n+1]:e[0])));return t}},{key:"collide",value:function(e){if("arc"===e.kind)return e.collide(this);var t=this.findMax(),n=Object(d.a)(t,4),a=n[0],r=n[1],i=n[2],o=n[3],s=e.findMax(),c=Object(d.a)(s,4),u=c[0],l=c[1],h=c[2],p=c[3];if(r<l&&a>u&&o<p&&i>h||l<r&&u>a&&p<o&&h>i)return!0;var f,m=this.findSides(),b=e.findSides(),v=Object(g.a)(m);try{for(v.s();!(f=v.n()).done;){var y,x=f.value,k=Object(g.a)(b);try{for(k.s();!(y=k.n()).done;){var w=y.value;if(M(x,w))return!0}}catch(O){k.e(O)}finally{k.f()}}}catch(O){v.e(O)}finally{v.f()}return!1}},{key:"absoluteX",get:function(){return this.x+this.parent.x}},{key:"absoluteY",get:function(){return this.y+this.parent.y}},{key:"hasBorder",get:function(){return this.border||this.borderOnly}},{key:"width",get:function(){return this.hasBorder?this.w+this.borderWidth:this.w}},{key:"height",get:function(){return this.hasBorder?this.h+this.borderWidth:this.h}},{key:"outOfBound",get:function(){var e=this.findMax(),t=Object(d.a)(e,4),n=t[0],a=t[1],r=t[2],i=t[3],o=this.parent.parent.canvas,s=o.width,c=o.height;return n>s||a<0||r>c||i<0}},{key:"borderWidthIfBorderIsOn",get:function(){return this.border||this.borderOnly?this.borderWidth:0}}]),e}(),X.rect=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultRectOptions,Object(L.a)(r)),r}return Object(w.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(n){var a=Object(d.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(I(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}}]),n}(X.shape),X.arc=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultArcOptions,Object(L.a)(r)),r}return Object(w.a)(n,[{key:"pointInShape",value:function(e,t){var n=T(this.absoluteX,this.absoluteY,e,t);return n>this.minAngle&&n<this.maxAngle&&C(this.absoluteX,this.absoluteY,e,t)<=this.radius}},{key:"findMax",value:function(){var e=[this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius],t=[this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius],n=[this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius];return this.pointInShape(e[0],this.absoluteY)||(e[0]=Math.min.apply(Math,t)-this.borderWidthIfBorderIsOn/2),this.pointInShape(e[1],this.absoluteY)||(e[1]=Math.max.apply(Math,t)+this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[2])||(e[2]=Math.min.apply(Math,n)-this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[3])||(e[3]=Math.max.apply(Math,n)+this.borderWidthIfBorderIsOn/2),e}},{key:"findVertex",value:function(){var e=this.findMax(),t=Object(d.a)(e,4),n=t[0],a=t[1],r=t[2],i=t[3],o=[this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX],s=[this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY];return[[n,s[o.indexOf(n)]],[a,s[o.indexOf(a)]],[o[s.indexOf(r)],r],[o[s.indexOf(i)],i]]}},{key:"fidnSides",value:function(){return 360!==this.arcDegree&&[[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]]}},{key:"collide",value:function(e){var t,n=this.findVertex(),a=e.findVertex(),r=Object(g.a)(n);try{for(r.s();!(t=r.n()).done;){var i=Object(d.a)(t.value,2),o=i[0],s=i[1];if(e.pointInShape(o,s))return!0}}catch(w){r.e(w)}finally{r.f()}var c,u=Object(g.a)(a);try{for(u.s();!(c=u.n()).done;){var l=Object(d.a)(c.value,2),h=l[0],p=l[1];if(this.pointInShape(h,p))return!0}}catch(w){u.e(w)}finally{u.f()}if("arc"===e.kind){if(this.pureCircle&&e.pureCircle)return C(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)<=this.radius+e.radius;if(C(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)>this.radius+e.radius)return!1;var f=T(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY),m=T(e.absoluteX,e.absoluteY,this.absoluteX,this.absoluteY);return f<this.maxAngle&&f>this.minAngle&&m<e.maxAngle&&m>e.minAngle}var b,v=e.findSides(),y=Object(g.a)(v);try{for(y.s();!(b=y.n()).done;){var x=b.value,k=D(this.absoluteX,this.absoluteY,x);if(k&&this.pointInShape(k[0],k[1]))return!0}}catch(w){y.e(w)}finally{y.f()}return!1}},{key:"radius",get:function(){return this.hasBorder?this.rad+this.borderWidth:this.rad}},{key:"minAngle",get:function(){return this.rotation}},{key:"maxAngle",get:function(){return this.rotation+this.arcDegree}},{key:"minRadAngle",get:function(){return S(this.minAngle)}},{key:"maxRadAngle",get:function(){return S(this.maxAngle)}},{key:"pureCircle",get:function(){return 360===this.arcDegree}}]),n}(X.shape),X.roundedRectangle=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),(r=t.call(this,e,a)).borderRadius=e.borderRadius||0,r.clip&&(e.clipCanvas?(r.clipImage=e.clipCanvas,r.clipCanvas=!0):r.clipImage=X.sprite(r.clipImageLink,(function(){r.parent.updateVisual()}))),r}return Object(w.a)(n,[{key:"clipImageLoaded",get:function(){return!!this.clip&&(!!this.clipCanvas||this.clipImage.complete)}}]),n}(X.rect),X.poly=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultPolyOptions,Object(L.a)(r)),r.clip&&(r.clipImage=X.sprite(r.clipImageLink,(function(){r.parent.updateVisual()}))),r}return Object(w.a)(n,[{key:"findVertex",value:function(){var e=this;return this.polyPoints.map((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return I(e.absoluteX,e.absoluteY,a+e.absoluteX,r+e.absoluteY,e.rotation)}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&this.clipImage.complete}},{key:"polyPoints",get:function(){if(!this.specialPolygon)return this.points;for(var e=360/this.numberOfSide,t=[],n=0;n<this.numberOfSide;n++)t.push(P(0,0,e*n,this.radius));return t}},{key:"width",get:function(){return this.findMax()[1]-this.findMax()[0]}},{key:"height",get:function(){return this.findMax()[3]-this.findMax()[2]}},{key:"sideLength",get:function(){if(!this.specialPolygon)return null;var e=S(360/this.numberOfSide);return Math.sqrt(2*Math.pow(this.radius,2)-2*Math.pow(this.radius,2)*Math.cos(e))}}]),n}(X.shape),X.line=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultLineOptions,Object(L.a)(r)),r}return Object(w.a)(n,[{key:"findVertex",value:function(){var e=this,t=[],n=function(e){var n,a=Object(d.a)(e,2),r=a[0],i=a[1],o=Object(g.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=Object(d.a)(s,2),u=c[0],l=c[1];if(Math.round(r)===Math.round(u)&&Math.round(i)===Math.round(l))return!1}}catch(h){o.e(h)}finally{o.f()}return!0},a=Object(y.a)(this.rotatedPoints);return a.forEach((function(r,i){var o=Object(d.a)(r,2),s=o[0],c=o[1];if(i!==a.length-1){var u=Object(d.a)(e.rotatedPoints[i+1],2),l=u[0],h=u[1],p=C(s,c,l,h),f=Math.atan(e.lineWidth/2/p),m=T(s,c,l,h),b=A(f)+m,v=Math.sqrt(p*p+.5*e.lineWidth*(.5*e.lineWidth)),g=P(s,c,b,v),x=P.apply(void 0,Object(y.a)(g).concat([180+m,p])),k=P.apply(void 0,Object(y.a)(x).concat([270+m,p])),w=P.apply(void 0,Object(y.a)(k).concat([m,p]));n(w)&&t.push(w),n(g)&&t.push(g),n(x)&&t.push(x),n(k)&&t.push(k)}})),t}},{key:"rotatedPoints",get:function(){var e=this;return this.points.map((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return I(e.absoluteX,e.absoluteY,a+e.absoluteX,r+e.absoluteY,e.rotation)}))}}]),n}(X.shape),X.text=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultTextOptions,Object(L.a)(r)),r}return Object(w.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,.5],[1,.5]].forEach((function(n){var a=Object(d.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(I(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"textSize",get:function(){var e=X.apps[0].context;e.save(),e.font=this.font;var t=e.measureText(this.text).width,n=e.measureText("gM").width;return e.restore(),[t,n]}},{key:"w",get:function(){return this.textSize[0]+this.borderWidthIfBorderIsOn}},{key:"h",get:function(){return this.textSize[1]+this.borderWidthIfBorderIsOn}}]),n}(X.shape),X.img=function(e){Object(N.a)(n,e);var t=Object(V.a)(n);function n(e,a){var r;return Object(k.a)(this,n),r=t.call(this,e,a),E(e,X.defaultImgOptions,Object(L.a)(r)),r.sprite=X.sprite(r.spriteLink,(function(){r.loadedFunction&&r.loadedFunction(),r.parent.updateVisual()})),r}return Object(w.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(n){var a=Object(d.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(I(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"imageLoaded",get:function(){return this.sprite.complete}},{key:"w",get:function(){return this.drawWidth?this.drawWidth:this.imageLoaded?this.drawHeight?this.drawHeight*this.sprite.width/this.sprite.height:this.sprite.width:0}},{key:"h",get:function(){return this.drawHeight?this.drawHeight:this.imageLoaded?this.drawWidth?this.drawWidth*this.sprite.height/this.sprite.width:this.sprite.height:0}}]),n}(X.shape),X.object.prototype.attachQuickMovement=function(e,t,n){var a=!0,r=this;document.addEventListener("keydown",(function(i){a&&-1!==X.inputReference.movementIndex.indexOf(i.key)&&(r.x+=X.inputReference.coeffIndex[X.inputReference.movementIndex.indexOf(i.key)][0]*e,r.y+=X.inputReference.coeffIndex[X.inputReference.movementIndex.indexOf(i.key)][1]*e,r.updateVisual(),n&&n(i,r),a=!1,setTimeout((function(){a=!0}),t))}))},X.app.prototype.mouseInputInit=function(){var e=this,t=function(t,n){var a=e.translateMouseCoor(t),r=Object(d.a)(a,2),i=r[0],o=r[1];if(0!==e.objects.length){for(var s=e.objects.length;s--;s>=0){var c=e.objects[s];if(0!==c[n].length&&(c.display&&c.pointInObject(i,o))){var u,l=Object(g.a)(c[n]);try{for(l.s();!(u=l.n()).done;){(0,u.value)(i,o)}}catch(y){l.e(y)}finally{l.f()}break}}e:for(var h=e.objects.length;h--;h>=0){var p=e.objects[h];if(0!==p.shapes.length&&p.display)for(var f=p.shapes.length;f--;f>=0){var m=p.shapes[f];if(0!==m[n].length&&(m.display&&m.pointInShape(i,o))){var b,v=Object(g.a)(m[n]);try{for(v.s();!(b=v.n()).done;){(0,b.value)(i,o)}}catch(y){v.e(y)}finally{v.f()}break e}}}}};this.canvas.addEventListener("mouseup",(function(e){return t(e,"mouseUpEvent")})),this.canvas.addEventListener("mousemove",(function(e){return t(e,"mouseMoveEvent")})),this.canvas.addEventListener("mousedown",(function(e){return t(e,"mouseDownEvent")}))},X.object.prototype.pressedEvent=function(e){this.mouseUpEvent.push(e)},X.object.prototype.makeDraggable=function(e,t){var n=this;this.onDrag=!1;var a=this;this.draggable=!0;var r=0,i=0;this.mouseDownEvent.push((function(e,t){a.draggable&&(a.onDrag||(a.onDrag=!0,r=e-a.x,i=t-a.y))})),document.addEventListener("mousemove",(function(t){var o=n.parent.translateMouseCoor(t);(o[0]<0||o[0]>n.parent.canvas.width||o[1]<0||o[1]>n.parent.canvas.height)&&(a.onDrag=!1),a.onDrag&&(a.x=o[0]-r,a.y=o[1]-i,a.updateVisual(),"function"==typeof e&&e(a))})),this.parent.canvas.addEventListener("mouseup",(function(e){a.onDrag&&(a.onDrag=!1,t&&t())}))},X.object.prototype.hoverEvent=function(e,t){var n=this;this.mouseIn=!1;var a=this;document.addEventListener("mousemove",(function(e){var r=n.parent.translateMouseCoor(e);if(r[0]<0||r[0]>n.parent.canvas.width||r[1]<0||r[1]>n.parent.canvas.height)return a.mouseIn=!1,void(t&&(t(a),a.updateVisual()));var i=a.pointInObject(r[0],r[1]);a.mouseIn&&!i&&(a.mouseIn=!1,t&&(t(a),a.updateVisual()))})),this.mouseMoveEvent.push((function(){a.mouseIn||(a.mouseIn=!0,e&&(e(a),a.updateVisual()))}))},X.object.prototype.attachQuickMovement=function(e,t,n){var a=!0,r=this;document.addEventListener("keydown",(function(i){a&&-1!==X.inputReference.movementIndex.indexOf(i.key)&&(r.x+=X.inputReference.coeffIndex[X.inputReference.movementIndex.indexOf(i.key)][0]*e,r.y+=X.inputReference.coeffIndex[X.inputReference.movementIndex.indexOf(i.key)][1]*e,r.updateVisual(),n&&n(i,r),a=!1,setTimeout((function(){a=!0}),t))}))},X.shape.prototype.pressedEvent=function(e){this.mouseUpEvent.push(e)},X.shape.prototype.hoverEvent=function(e,t){var n=this;this.mouseIn=!1;var a=this;document.addEventListener("mousemove",(function(e){if(n.display){var r=n.parent.parent.translateMouseCoor(e);if(r[0]<0||r[0]>n.parent.parent.canvas.width||r[1]<0||r[1]>n.parent.parent.canvas.height)return a.mouseIn=!1,void(t&&(t(a),a.parent.updateVisual()));var i=a.pointInShape(r[0],r[1]);a.mouseIn&&!i&&(a.mouseIn=!1,t&&(t(a),a.parent.updateVisual()))}})),this.mouseMoveEvent.push((function(){a.mouseIn||(a.mouseIn=!0,e&&(e(a),a.parent.updateVisual()))}))},X.app.prototype.animate=function(){if(void 0!==X.frameTime&&void 0!==X.lastFrame){var e=X.frameTime-X.lastFrame;this.objects.forEach((function(t){t.animate(e),t.shapes.forEach((function(t){t.animate(e)}))}))}};for(var Y in X.animateFunctionReference={animate:function(e){var t=this,n=this;this.animations.forEach((function(a){var r=Object(d.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3],u=W(i,n)+e/c*(o-s);s<o&&u>o&&(u=o),s>o&&u<o&&(u=o),B(i,n,u),t.parent.updateVisual?t.parent.updateVisual():t.updateVisual()}))},addAnimation:function(e,t,n,a){var r=this;this.animationCount++;var i=this.animationCount,o=setTimeout((function(){B(e,r,t),r.cancelAnimation(i),r.parent.updateVisual?r.parent.updateVisual():r.updateVisual(),a&&a()}),n),s=this.animations.find((function(t){return t[0]===e}));return s&&this.cancelAnimation(s[6]),this.animations.push([e,t,W(e,this),n,o,a,i]),i},cancelAnimation:function(){for(var e=this,t=function(){var t=a[n],r=e.animations.find((function(e){return e[6]===t})),i=e.animations.findIndex((function(e){return e[6]===t}));if(!r)return{v:!1};clearTimeout(r[4]),e.animations.splice(i,1)},n=0,a=Array.prototype.slice.call(arguments);n<a.length;n++){var r=t();if("object"===typeof r)return r.v}}},X.animateFunctionReference)X.object.prototype[Y]=X.animateFunctionReference[Y],X.shape.prototype[Y]=X.animateFunctionReference[Y];X.app.prototype.render=function(){this.clearCanvas(),this.fillBackground(),this.renderShape()},X.app.prototype.visualInit=function(){this.backgroundColor=this.options.background,this.context=this.canvas.getContext("2d")},X.app.prototype.renderShape=function(){this.renderPositions(),this.objects.sort((function(e,t){return e.zIndex-t.zIndex})).forEach((function(e){e.static?e.drawPreloader():e.draw()}))},X.app.prototype.clearCanvas=function(){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()},X.app.prototype.fillBackground=function(){"none"!==this.backgroundColor&&(this.context.save(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore())},X.app.prototype.renderPositions=function(){var e=this;this.context.save(),this.context.fillStyle="red",this.objects.forEach((function(t){var n=t.x,a=t.y;t.positionIndicator&&(e.context.beginPath(),e.context.arc(n,a,5,0,2*Math.PI),e.context.closePath(),e.context.fill())})),this.context.restore()},X.object.prototype.updateVisual=function(){for(var e=this,t=this.findMax(),n=0;n<t.length;n++)if(Math.round(t[n])!==Math.round(this.preloader.maxes[n]))return void this.createPreloader();this.clearPreloader(),this.shapes.forEach((function(t){var n=e.preloader.ox+t.x,a=e.preloader.oy+t.y;X.drawShape(e.preloader.context,n,a,t)}))},X.object.prototype.clearPreloader=function(){this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height)},X.object.prototype.createPreloader=function(){this.preloader=document.createElement("canvas"),this.preloader.maxes=this.findMax();var e=Object(d.a)(this.preloader.maxes,4),t=e[0],n=e[1],a=e[2],r=e[3];this.preloader.width=n-t,this.preloader.height=r-a,this.preloader.ox=this.x-t,this.preloader.oy=this.y-a,this.preloader.context=this.preloader.getContext("2d"),this.updateVisual()},X.object.prototype.drawPreloader=function(){if(this.display&&this.preloader.width>0&&this.preloader.height>0){var e=this.preloader.maxes[0]+this.preloader.width/2,t=this.preloader.maxes[2]+this.preloader.height/2;e=Math.ceil(e),t=Math.ceil(t),this.parent.context.save(),this.parent.context.translate(e,t),X.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height),this.parent.context.restore()}},X.object.prototype.draw=function(){var e=this;this.display&&this.shapes.forEach((function(t){X.drawShape(e.parent.context,e.x+t.x,e.y+t.y,t)}))},X.drawShape=function(e,t,n,a){a.display&&(a.border||a.borderOnly?this.drawShapeKind(e,a,t,n,!0,1,a.borderColor,a.shadow):a.borderOnly||a.border||this.drawShapeKind(e,a,t,n,!1,a.opacity,a.color,a.shadow),a.borderOnly||this.drawShapeKind(e,a,t,n,!1,a.opacity,a.color))},X.drawShapeKind=function(e,t,n,a,r,i,o,s){if(!(0==(i*=t.parent.opacity)||i<0)){if(n=Math.ceil(n),a=Math.ceil(a),e.save(),e.globalAlpha=i,e.fillStyle=o,e.strokeStyle=o,e.lineWidth=t.borderWidth,e.translate(n,a),s){var c=s.color,u=s.blur,l=s.offsetX,h=s.offsetY;e.shadowColor=c,e.shadowBlur=u,e.shadowOffsetX=l,e.shadowOffsetY=h}switch(t.kind){case"rect":X.drawRect(e,t.w,t.h,t.rotation,r);break;case"arc":X.drawArc(e,t.rad,t.arcDegree,t.rotation,r);break;case"text":X.drawText(e,t.text,t.font,r,t.textAlign,t.w,t.h,t.rotation);break;case"img":t.imageLoaded&&X.drawImg(e,t.sprite,t.w,t.h,t.rotation);break;case"poly":X.drawPoly(e,t.polyPoints,t.rotation,r);break;case"line":if(r){var p=t.points.map((function(e,n){var a=Object(d.a)(e,2),r=a[0],i=a[1];if(0===n){var o=S(T.apply(void 0,Object(y.a)(e).concat(Object(y.a)(t.points[n+1]))));return[r-t.borderWidth*Math.cos(o),i+t.borderWidth*Math.sin(o)]}if(n===t.points.length-1){var s=S(T.apply(void 0,Object(y.a)(e).concat(Object(y.a)(t.points[n-1]))));return[r-t.borderWidth*Math.cos(s),i+t.borderWidth*Math.sin(s)]}return[r,i]}));X.drawLine(e,p,t.rotation,t.lineWidth+t.borderWidth)}else X.drawLine(e,t.points,t.rotation,t.lineWidth);break;case"roundedRectangle":X.drawRoundedRectangle(e,t.w,t.h,t.rotation,t.borderRadius,r)}t.clip&&t.clipImageLoaded&&(e.clip(),e.rotate(S(t.rotation)),e.drawImage(t.clipImage,-t.width/2,-t.height/2,t.width,t.height)),e.restore()}},X.drawRect=function(e,t,n,a,r){e.rotate(S(360-a)),r?e.strokeRect(-t/2,-n/2,t,n):e.fillRect(-t/2,-n/2,t,n)},X.drawRoundedRectangle=function(e,t,n,a,r,i){e.rotate(S(360)),e.beginPath(),e.moveTo(0,.5*-n),e.lineTo(.5*-t+r,.5*-n),e.quadraticCurveTo(.5*-t,.5*-n,.5*-t,.5*-n+r),e.lineTo(.5*-t,.5*n-r),e.quadraticCurveTo(.5*-t,.5*n,.5*-t+r,.5*n),e.lineTo(.5*t-r,.5*n),e.quadraticCurveTo(.5*t,.5*n,.5*t,.5*n-r),e.lineTo(.5*t,.5*-n+r),e.quadraticCurveTo(.5*t,.5*-n,.5*t-r,.5*-n),e.lineTo(0,.5*-n),e.closePath(),i?e.stroke():e.fill()},X.drawArc=function(e,t,n,a,r){e.beginPath();var i=S(360-a-n),o=S(360-a);if(n<360){var s=I(0,0,t,0,360-a-n),c=Object(d.a)(s,2),u=c[0],l=c[1];e.moveTo(u,l),e.moveTo(0,0)}e.arc(0,0,t,i,o),r?e.stroke():e.fill(),e.closePath()},X.drawText=function(e,t,n,a,r,i,o,s){e.textAlign=r,e.font=n,e.rotate(S(360-s)),e.fillText(t,Math.ceil(-i/2),Math.ceil(o/3.5))},X.drawImg=function(e,t,n,a,r){e.rotate(S(360-r)),e.drawImage(t,-n/2,-a/2,n,a)},X.drawPoly=function(e,t,n,a){0!==t.length&&t&&(e.rotate(S(360-n)),e.beginPath(),e.moveTo.apply(e,Object(y.a)(t[0])),t.forEach((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.closePath(),a?e.stroke():e.fill())},X.drawLine=function(e,t,n,a){e.beginPath(),e.rotate(S(360-n)),e.moveTo.apply(e,Object(y.a)(t[0])),t.forEach((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.lineWidth=a,e.stroke()},X.object.prototype.addShape=function(e){var t=new X[e.kind](e,this);return this.updateVisual(),t},X.app.prototype.addObject=function(e){return new X.object(e,this)},X.app.prototype.removeObject=function(e){this.objects.splice(this.objects.indexOf(e),1)};var F=X,U=function(){function e(t){var n=this;Object(k.a)(this,e),this.configureMonopolyResourceInterface=function(){var e=n.addLayer();e.display=!1,e.addShape({kind:"roundedRectangle",w:400,h:200,color:"#ffffed",borderRadius:10,border:!0,borderColor:"black",borderWidth:10,shadow:{blur:7,offsetX:3,color:"black"}}),e.addShape({kind:"text",text:"Choose Monopoly Resource:",font:"25px Times News Roman",y:-80});var t=["wheat","rock","sheep","wood","brick"],a=45*t.length+35*(t.length-1),r=function(){};["assets/wheatIcon.png","assets/rockIcon.png","assets/sheepIcon.png","assets/woodIcon.png","assets/brickIcon.png"].map((function(n,i){var o=e.addShape({kind:"img",drawWidth:45,spriteLink:n,x:-a/2+22.5+35*i+45*i});return o.hoverEvent((function(){o.addAnimation("drawWidth",65,200)}),(function(){o.addAnimation("drawWidth",45,200)})),o.pressedEvent((function(){e.display=!1,r(t[i])})),o}));n.initiateMonpolyResourceChoosing=function(){return e.display=!0,new Promise((function(e){return r=e}))}},this.app=new F.app(t),this.app.canvas.width=1700,this.app.canvas.height=1300,this.app.backgroundColor="#00d7e1";!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];[].concat(t).forEach((function(e){return n[e]=n.addLayer()}))}("background","resourceElement","buttonElement","portElement","roadElement","structureElement","robberElement","diceElement"),this.hexProperty={kind:"poly",radius:80,numberOfSide:6,rotation:90,specialPolygon:!0,color:"green"},this.inititiateArray("hexMap","buttonMap","numberMap","dotMap","portMap","houses","city","roads","settlements","cities","structures"),this.getPositionMatrix(),this.createDiceDeck(),this.createDevDeck(),this.createActionObject(),this.createPlayerDeck(),this.drawAnnouncement(),this.setUpResourceIcon(),this.setUpTurnTimer(),this.configureStartGameMessage(),this.configureMonopolyResourceInterface()}return Object(w.a)(e,[{key:"configureColorCode",value:function(e,t){this.colorCode=e,this.turnObject=t}},{key:"configureStartGameMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width-150,y:this.app.canvas.height-120,display:!1}),t=e.addShape({kind:"text",text:"Start Game",color:"orange",font:"40px Times News Roman"});e.addShape({kind:"roundedRectangle",w:200,h:100,display:!1});var n=!1,a=function(){},r=function(){n?t.addAnimation("opacity",1,1e3,i):t.opacity=1},i=function(){n?t.addAnimation("opacity",0,1e3,r):t.opacity=1};e.pressedEvent((function(){n=!1,e.display=!1,a()})),this.initiateStartGameMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};n||(a=t,n=!0,e.display=!0,i())},this.turnOffStartGameMessage=function(){e.display=!1}}},{key:"addYellowHoverEvent",value:function(e){var t=e.color;e.hoverEvent((function(){t=e.color,e.color="yellow",e.parent.updateVisual()}),(function(){e.color=t,e.parent.updateVisual()}))}},{key:"configureStealInterface",value:function(e){var t=this,n=["assets/wheatIcon.png","assets/rockIcon.png","assets/sheepIcon.png","assets/woodIcon.png","assets/brickIcon.png"],a=["wheat","rock","sheep","wood","brick"];this.halfCard=this.addLayer(),this.stealInterface=this.addLayer(),this.halfCard.display=!1;this.halfCard.addShape({kind:"roundedRectangle",w:400,h:300,color:"#ffffed",borderRadius:20,border:!0,borderColor:"black",borderWidth:10,shadow:{blur:7,offsetX:3,color:"black"}});for(var r=this.halfCard.addShape({kind:"text",font:"30px Times News Roman",y:-130,text:"Discard your cards"}),i="Need to Discard",o=this.halfCard.addShape({kind:"text",font:"25px Times News Roman",y:-95,text:"".concat(i,": 4"),color:"grey"}),s=75*a.length,c=[0,0,0,0,0],u=0,d=[0,0,0,0,0],l="steal",h=function(){},p=function(e){h=function(n){t.halfCard.display=!1,e(n)}},f=function(){return c.map((function(t,n){return e["".concat(a[n],"Amount")]+("steal"===l?-1:1)*c[n]}))},m=[],b=[],v=[],y=[],g=[],k=function(e){return function(){e(),E()}},w=function(r){var i=-s/2+15+22.5+75*r;m.push(t.halfCard.addShape({kind:"img",drawWidth:45,y:-20,spriteLink:n[r],x:i})),b.push(t.halfCard.addShape({kind:"text",y:20,font:"25px Times News Roman",x:i,text:"(2)",color:"gray"})),v.push(t.halfCard.addShape({kind:"text",y:50,font:"25px Times News Roman",x:i,text:"0",color:"gray"}));var o=t.halfCard.addShape({kind:"text",y:80,font:"35px Times News Roman",text:"+",x:i-10}),d=t.halfCard.addShape({kind:"text",y:80,font:"35px Times News Roman",text:"-",x:i+10});t.addYellowHoverEvent(o),t.addYellowHoverEvent(d),y.push(o),g.push(d),o.pressedEvent(k((function(){u&&e["".concat(a[r],"Amount")]-c[r]&&(c[r]++,u-=1)}))),d.pressedEvent(k((function(){c[r]&&(c[r]--,u+=1)})))},O=0;O<a.length;O++)w(O);var j=this.halfCard.addShape({kind:"img",spriteLink:"assets/tickIcon.png",drawWidth:30,y:125});j.pressedEvent((function(){h(c)}));var R,E=function(){o.text="".concat(i," ").concat(u),d=f(),c.forEach((function(e,t){b[t].text="(".concat(d[t],")"),v[t].text=e})),j.display=!u,t.halfCard.updateVisual()};this.initiateSteal=function(e){return new Promise((function(n){l="steal",r.text="Discard your cards",i="Card to discard:",u=e,c=[0,0,0,0,0],d=f(),p(n),E(),t.halfCard.display=!0}))},this.initiatePlenty=function(){return new Promise((function(e){l="plenty",r.text="Choose your card",i="Card to choose:",u=2,c=[0,0,0,0,0],d=f(),p(e),E(),t.halfCard.display=!0}))},this.stealInterface.addShape({kind:"roundedRectangle",w:300,h:300,color:"#ffffed",borderRadius:20,border:!0,borderColor:"black",borderWidth:10,shadow:{blur:7,offsetX:3,color:"black"}}),this.stealInterface.addShape({kind:"text",font:"30px Times New Roman",y:-120,text:"Steal from...",color:"grey"});var C={kind:"text",font:"35px Times News Roman"},T=[this.stealInterface.addShape(Object(x.a)({},C,{y:-70,display:!1})),this.stealInterface.addShape(Object(x.a)({},C,{y:0,display:!1})),this.stealInterface.addShape(Object(x.a)({},C,{y:70,display:!1}))];T.forEach((function(e,n){t.addYellowHoverEvent(e),e.pressedEvent((function(){T.forEach((function(e){return e.display=!1})),t.stealInterface.display=!1,R(n)}))})),this.stealInterface.display=!1,this.initiateStealFromOther=function(e,n){return new Promise((function(a){R=a,e.forEach((function(e,t){T[t].text=e,T[t].color=n[t],T[t].display=!0,console.log(n[t])})),console.log(T),t.stealInterface.updateVisual(),t.stealInterface.display=!0}))}}},{key:"receiveData",value:function(e){var t,n=e.grid,a=(e.playerUsernames,n.resourceBoard),r=n.numberBoard;this.resourceBoard=a,this.numberBoard=r,this.createBoard();e:for(var i=0;i<this.resourceBoard.length;i++)for(var o=0;o<this.resourceBoard[i].length;o++)if("Desert"===this.resourceBoard[i][o]){t=[i,o];break e}var s=Object(d.a)(this.positionMatrix[t[0]-1][t[1]-1],2),c=s[0],u=s[1];this.robber=this.addRobber(c,u)}},{key:"moveRobber",value:function(e){var t=Object(d.a)(this.positionMatrix[e[0]-1][e[1]-1],2),n=t[0],a=t[1];n=this.robberElement.x+n,a=this.robberElement.y+a,this.robberElement.addAnimation("x",n,500),this.robberElement.addAnimation("y",a,500)}},{key:"selectSettlementLocationFrom",value:function(e){var t=this;return new Promise((function(n){var a=e.map((function(e){var r=t.drawPossibleSettlement(e);return r.pressedEvent((function(){a.forEach((function(e){return e.kill()})),n(e)})),r}))}))}},{key:"drawAllPossibleSettlementLocation",value:function(e){var t=this,n=[];return e.forEach((function(e,a){var r=t.drawPossibleSettlement(e);r.location=e,n.push(r)})),n}},{key:"setUpTurnTimer",value:function(){var e=this;this.turnTimer=null,this.turnTimerInterval=null,this.turnTimerElement=this.app.addObject({x:100,y:70,display:!1}),this.turnTimerText=this.turnTimerElement.addShape({kind:"text",color:"blue",font:"50px Times News Roman",text:30}),this.turnTimerElement.addShape({kind:"roundedRectangle",w:70,h:70,display:!1}),this.turnTimerElement.addShape({kind:"text",font:"25px Times News Roman",text:"Time left:",y:-40}),this.startTurnTimer=function(t){e.cancelTurnTimer();var n=t/1e3;e.turnTimerInterval=setInterval((function(){e.turnTimerText.text=n,e.turnTimerElement.updateVisual(),n--}),1e3),e.turnTimer=setTimeout((function(){return e.turnTimerElement.addAnimation("opacity",0,1e3,(function(){return e.turnTimerElement.display=!1}))}),t),e.turnTimerElement.display=!0,e.turnTimerElement.opacity=0,e.turnTimerElement.addAnimation("opacity",1,1e3)},this.cancelTurnTimer=function(){clearInterval(e.turnTimerInterval),clearTimeout(e.turnTimer),e.turnTimerElement.addAnimation("opacity",0,1e3,(function(){return e.turnTimerElement.display=!1}))}}},{key:"animateResourceToLeaderBoard",value:function(e,t){var n,a=this,r=Object(d.a)(t,2),i=r[0],o=r[1],s=Object(d.a)(this.positionMatrix[i][o],2),c=s[0],u=s[1],l=(n="assets/".concat(e,"Icon.png"),a.robberElement.addShape({kind:"img",drawWidth:40,spriteLink:n,display:!1}));l.x=c,l.y=u,l.display=!0;var h=this.findDistanceFromShapeTo(l,this.leaderBoardObject),p=Object(d.a)(h,2),f=p[0],m=p[1];l.addAnimation("x",f,1e3,(function(){return l.kill()})),l.addAnimation("y",m,1e3)}},{key:"setUpResourceIcon",value:function(){var e=this,t=function(t){return e.robberElement.addShape({kind:"img",drawWidth:40,spriteLink:t,display:!1})};this.wheatResourceIcon=t("assets/wheatIcon.png"),this.rockResourceIcon=t("assets/rockIcon.png"),this.brickResourceIcon=t("assets/brickIcon.png"),this.sheepResourceIcon=t("assets/sheepIcon.png"),this.woodResourceIcon=t("assets/woodIcon.png")}},{key:"animateDevCardToLeaderBoard",value:function(){var e=this;this.animateDevCard.display=!0,this.animateDevCard.addAnimation("x",this.animateDevCard.x+(this.leaderBoardObject.x-this.animateDevCard.absoluteX),500,(function(){e.animateDevCard.x=0,e.animateDevCard.display=!1}))}},{key:"animateDevCardToPlayerDeck",value:function(){var e=this;console.log("fired"),this.animateDevCard.display=!0,console.log(this.animateDevCard.y),this.animateDevCard.addAnimation("y",1e3,800,(function(){console.log("done"),e.animateDevCard.y=0,console.log(e.animateDevCard.y),e.animateDevCard.display=!1}))}},{key:"createTradingObject",value:function(e,t){var n=this,a=700,r=700,i="send",o=!1,s=[],c="",u=0,l=function(){},h=function(){},p="Accept";this.tradingElement=this.addLayer(),this.tradingElement.display=!1;var f=function(e){var t=e.color;e.hoverEvent((function(){e.color="yellow",n.tradingElement.updateVisual()}),(function(){e.color=t,n.tradingElement.updateVisual()}))};this.tradingElement.addShape({kind:"roundedRectangle",w:a,h:r,color:"#ffffed",borderRadius:40,border:!0,borderColor:"black",borderWidth:10,shadow:{blur:7,offsetX:3,color:"black"}}),this.tradingElement.addShape({kind:"text",y:-305,font:"bold 40px Times News Roman",text:"Trade"}),this.tradingElement.addShape({kind:"text",x:-150,y:-260,font:"30px Times News Roman",text:"My Resources"}),this.tradingElement.addShape({kind:"text",x:170,y:-260,font:"30px Times News Roman",text:"Resource Demanded"}),this.tradingElement.addShape({kind:"line",points:[[0,-260],[0,120]]}),this.tradingElement.addShape({kind:"line",points:[[-310,-230],[310,-230]]});var m=[-180,-120,-60,0,60],b=["assets/wheatIcon.png","assets/rockIcon.png","assets/sheepIcon.png","assets/woodIcon.png","assets/brickIcon.png"],v=["wheat","rock","sheep","wood","brick"],g=[0,0,0,0,0],x=[0,0,0,0,0],k=Object(y.a)(e),w=function(e){return b.forEach((function(t,a){return n.tradingElement.addShape({kind:"img",spriteLink:t,drawWidth:40,x:e,y:m[a]})}))},O=-250;w(O),w(O=60);var j=m.map((function(e){return e-10})),R=function(e,t,a){return j.map((function(r,i){return function(e,t,a,r,i){var o=n.tradingElement.addShape({kind:"text",text:e,font:"50px Times News Roman",x:t,y:a});f(o),o.pressedEvent((function(){return i(r)}))}(e,t,r,i,a)}))},E=function(e,t){return e.map((function(e,a){return n.tradingElement.addShape({kind:"text",text:e,font:"30px Times News Roman",x:t,y:m[a],color:"gray"})}))},C=function(e){return function(t){e(t),"receive"===i&&(X.text="Counter propose"),"receive"===i&&(p="Response"),D()}},T=(R("-",O=-60,C((function(e){if(g[e]){if("bank"===i){var n=4;return t.tradingPriveleges.randomTrade&&(n=3),t.tradingPriveleges[v[e]+"Trade"]&&(n=2),u?(u--,g[e]-=n):void 0}g[e]--}}))),R("+",O=-180,C((function(e){if("bank"===i){var n=4;return t.tradingPriveleges.randomTrade&&(n=3),t.tradingPriveleges[v[e]+"Trade"]&&(n=2),t[v[e]+"Amount"]<(g[e]+1)*n?void 0:(u++,g[e]+=n)}t["".concat(v[e],"Amount")]-g[e]&&g[e]++}))),E(g,O=-120));R("+",O=130,C((function(e){if("bank"===i)return u?(x[e]++,u--):void 0;x[e]++})));var A=E(x,O=190);R("-",O=250,C((function(e){if(x[e])return"bank"===i?(x[e]--,u++):void x[e]--}))),O=-310;for(var S=function(){return g.map((function(e,n){return t["".concat(v[n],"Amount")]-e}))},I=E(S().map((function(e){return"(".concat(e,")")})),O),P=this.tradingElement.addShape({kind:"text",text:"Propose Trade To:",x:-200,y:150,font:"30px Times News Roman"}),M=this.tradingElement.addShape({kind:"text",text:"",x:-250,y:190,font:"25px Times News Roman",display:!1}),D=function(){A.forEach((function(e,t){return e.text=x[t]})),T.forEach((function(e,t){return e.text=g[t]}));var e=S().map((function(e){return"(".concat(e,")")}));I.forEach((function(t,n){return t.text=e[n]})),n.tradingElement.updateVisual()},B=[1,2,3].map((function(e,t){var a=n.tradingElement.addShape({kind:"text",text:"",x:-250,y:190+40*t,font:"25px Times News Roman"});return a.x=a.w/2-350+30,a})),W=function(e,t){var a,r=n.tradingElement.addShape({kind:"arc",color:"red",border:!0,rad:10,borderWidth:10,borderColor:"brown",x:-20,y:e});return r.pressedEvent((function(){r.borderOnly&&k.splice(t,0,a),r.borderOnly||(a=k[t],k.splice(t,1)),r.borderOnly=!r.borderOnly,n.tradingElement.updateVisual()})),r},L=[],N=0;N<3;N++)L.push(W(190+40*N,N));var V=this.tradingElement.addShape({kind:"text",text:"Trade with Bank",font:"30px Times News Roman",y:150,x:20});V.x=V.w/2+20,f(V),V.pressedEvent((function(){J("send"===i?"bank":"send")}));var X=this.tradingElement.addShape({kind:"text",text:"Propose Trade",y:210,font:"30px Times News Roman"}),Y=this.tradingElement.addShape({kind:"text",text:"Cancel Trade",y:270,font:"30px Times News Roman"});X.x=X.w/2+20,Y.x=Y.w/2+20,f(X),f(Y);var F=this.tradingElement.addShape({kind:"img",spriteLink:"assets/tickIcon.png",drawWidth:40,x:270,y:213}),U=this.tradingElement.addShape({kind:"img",spriteLink:"assets/crossIcon.png",drawWidth:40,x:270,y:275}),K=this.tradingElement.addShape({kind:"img",spriteLink:"assets/crossIcon.png",drawWidth:40,x:-310,y:-310}),G=function(e){return function(){n.tradingElement.display=!1,o=!1,"receive"===i?(s.splice(0,1),s.length>0&&(o=!0,n.tradeReceiver(),n.tradingElement.display=!0)):s.length>0&&J("receive"),e()}},H=function(){var e;!1!==(e=function(){},function(){return console.log("pass1"),(0!==g.reduce((function(e,t){return e+t}),0)||0!==x.reduce((function(e,t){return e+t}),0))&&(console.log("pass2"),("send"!==i||0!==k.length)&&(console.log("pass3"),n.tradingElement.display=!1,o=!1,"receive"===i?(s.splice(0,1),s.length>0&&(o=!0,n.tradeReceiver(),n.tradingElement.display=!0)):s.length>0&&J("receive"),void e()))})()&&("receive"===i?h([p,i,g,x,c]):"send"===i?h([i,g,x,k]):"bank"===i&&h([i,g,x]))};Y.pressedEvent((function(){return G(l)()})),U.pressedEvent((function(){return G(l)()})),K.pressedEvent((function(){return G(l)()})),F.pressedEvent((function(){return H()})),X.pressedEvent((function(){return H()}));var Q=function(){P.text="Proposed To:",X.text="Propose Trade",M.display=!1},q=function(){L.forEach((function(e){return e.display=!1})),B.forEach((function(e){return e.display=!1})),V.display=!1},z=function(){V.display=!1,P.display=!0,V.text="Trade with Bank",n.tradingElement.updateVisual()},J=function(a){i=a,n.tradingElement.display=!0,o=!0,"receive"===i&&(p="Accept",n.updateTradeReceiver(),z(),q(),M.display=!0,P.text="Proposed By:",n.tradingElement.updateVisual()),"send"===i&&(g=[0,0,0,0,0],x=[0,0,0,0,0],k=Object(y.a)(e).filter((function(n){return n!==e[t.playerid]})),L.forEach((function(e){return e.borderOnly=!1})),Q(),z(),V.display=!0,L.forEach((function(e){return e.display=!1})),B.forEach((function(e){return e.display=!1})),e.filter((function(n){return n!==e[t.playerid]})).forEach((function(e,t){L[t].display=!0,B[t].text=e,B[t].x=B[t].w/2-350+30,B[t].display=!0})),n.tradingElement.updateVisual()),"bank"===i&&(g=[0,0,0,0,0],x=[0,0,0,0,0],u=0,Q(),q(),P.display=!1,V.display=!0,V.text="Trade with Players",n.tradingElement.updateVisual()),D()};this.updateTradeReceiver=function(){for(var a=Object(d.a)(s[0],3),r=a[0],i=a[1],u=a[2],l=0;l<i.length;l++){if(t[v[l]+"Amount"]<i[l])return s.splice(0,1),void(s.length>0?n.updateTradeReceiver():(o=!1,n.tradingElement.display=!1))}g=i,x=u,c=r,X.text="Accept Trade",M.text=e[r],D()},this.receiveTrade=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.push([].concat(t)),o||J("receive"),new Promise((function(e,t){h=e,l=t}))},this.initiateTrade=function(){return o?void 0:new Promise((function(e,t){h=e,l=t,J("send"),D(),n.tradingElement.display=!0}))}}},{key:"drawAnnouncement",value:function(){var e=this;this.announcementQueue=[],this.announcmentPerpetual=[],this.onAnnouncementPerpetual=!1,this.onAnnoucementChanged=!1,this.announcement=this.app.addObject({x:this.app.canvas.width/2,y:80,positionIndicator:!1}),this.annoucementText=this.announcement.addShape({kind:"text",font:"70px Times News Roman",color:"orange",text:"",display:!1}),this.announcement.addShape({kind:"roundedRectangle",w:this.app.canvas.width/2,h:200,display:!1});var t=function(t){return e.annoucementText.addAnimation("opacity",0,500,(function(){e.annoucementText.display=!1,t&&t()}))},n=function(n,a){return t((function(){n(),e.annoucementText.display=!0,function(t){e.annoucementText.addAnimation("opacity",1,500,t)}(a)}))};this.updateAnnouncement=function(){if(e.announcementQueue.length>0&&!e.announcementQueue[0][3]){var a=Object(d.a)(e.announcementQueue[0],3),r=a[0],i=a[1],o=a[2];n((function(){e.annoucementText.text=r,e.annoucementText.color=i,setTimeout((function(){e.announcementQueue.splice(0,1),e.updateAnnouncement()}),o+500)})),e.announcementQueue[0][3]=!0}else{if(e.announcementQueue.length>0)return;if(!e.onAnnouncementPerpetual&&e.annoucementText.display)return t();if(e.onAnnouncementPerpetual&&(!e.annoucementText.display||e.onAnnoucementChanged))return n((function(){var t=Object(d.a)(e.announcmentPerpetual,2),n=t[0],a=t[1];e.annoucementText.text=n,e.annoucementText.color=a}))}}}},{key:"changeAnnoucementPerpetual",value:function(e,t){this.announcmentPerpetual=[e,t],this.onAnnoucementChanged=!0,this.updateAnnouncement()}},{key:"addToAnnoucementQueue",value:function(e,t,n){this.announcementQueue.push([e,t,n,!1]),this.updateAnnouncement()}},{key:"drawPossibleSettlement",value:function(e){var t=this.findPositionOfIntersection(e),n=Object(d.a)(t,2),a=n[0],r=n[1];return this.structureElement.addShape({kind:"poly",x:a,y:r,color:"white",points:[[15,-10.5],[0,-25.5],[-15,-10.5],[-15,10.5],[15,10.5]],border:!0,borderColor:"black",borderWidth:2,opacity:.5})}},{key:"selectRoadLocation",value:function(e){var t=this;return new Promise((function(n){var a=e.map((function(e){var r=t.drawPossibleRoad(e[0],e[1]);return r.pressedEvent((function(){console.log("hello",n),n(e),a.forEach((function(e){return e.kill()}))})),r}))}))}},{key:"drawPossibleRoad",value:function(e,t){var n=this.findPositionOfIntersection(e),a=Object(d.a)(n,2),r=a[0],i=a[1],o=this.findPositionOfIntersection(t),s=Object(d.a)(o,2),c=s[0],u=s[1],l=S(T(r,i,c,u)),h=S(T(c,u,r,i));return r+=7*Math.cos(l),i-=7*Math.sin(l),c+=7*Math.cos(h),u-=7*Math.sin(h),this.roadElement.addShape({kind:"line",lineWidth:9,points:[[r,i],[c,u]],color:"white",border:!0,borderWidth:3,borderColor:"black"})}},{key:"createLeaderboardObject",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=300,r=320;this.leaderBoardObject=this.app.addObject({x:this.app.canvas.width-300,y:370});var i=document.createElement("canvas"),o=new F.app(i,{constantRender:!1,background:"pink"});o.backgroundColor="pink",o.canvas.width=a,o.canvas.height=r;var s=o.addObject({x:i.width/2,y:0}),c=function(e,t,n){return s.addShape({w:a,h:80,kind:"rect",y:e,color:t}),[s.addShape({y:e-20,color:"black",font:"bold italic 25px Times News Roman",text:"",kind:"text"}),s.addShape({y:e+10,color:"black",font:"20px Times News Roman",text:"",kind:"text"}),s.addShape({y:e+28,font:"10px Times News Roman",color:"black",kind:"text",text:""})]},u=c(40,"#00FFFF","black"),l=Object(d.a)(u,3),h=l[0],p=l[1],f=l[2],m=c(120,"#EA3C53","black"),b=Object(d.a)(m,3),v=b[0],y=b[1],g=b[2],x=c(200,"white","black"),k=Object(d.a)(x,3),w=k[0],O=k[1],j=k[2],R=c(280,"#FF7F50","black"),E=Object(d.a)(R,3),C=E[0],T=E[1],A=E[2];this.usernameElements=[h,v,w,C],this.infoElements=[p,y,O,T],this.specialNoteElements=[f,g,j,A],this.updateLeaderBoard=function(){var n=e.usernames,a=e.resourcePlayers,r=e.devCardPlayers,i=e.vpPlayers,c=e.longestRoadPlayer,u=e.largestArmyPlayer;t.specialNoteElements.forEach((function(e){return e.text=""})),n.forEach((function(e,n){t.usernameElements[n].text!==e&&(t.usernameElements[n].text=e),t.infoElements[n].text="".concat(i[n],"\ud83c\udf1f ").concat(a[n],"\ud83d\udcb2 ").concat(r[n]," Development Cards"),c===n&&u===n?t.specialNoteElements[n].text="Longest Road and Largest Army":c===n?t.specialNoteElements[n].text="Longest Road":u===n&&(t.specialNoteElements[n].text="Largest Army")})),s.updateVisual(),o.turnFunctions(o),t.leaderBoardObject.updateVisual()},this.updateLeaderBoard();this.leaderBoardObject.addShape({kind:"roundedRectangle",w:a,h:r,borderRadius:20,color:"white",clip:!0,clipCanvas:o.canvas,border:!0,borderWidth:5,borderColor:"black",shadow:{blur:7,offsetX:4,color:"black"}});var S=this.leaderBoardObject.addShape({kind:"poly",specialPolygon:!0,radius:20,numberOfSide:3,rotation:180,color:"#ffffa1",x:a/2+40,y:-r/2+40}),I=this.app.addObject({x:this.app.canvas.width-300,y:370,display:!1,opacity:0});I.addShape({kind:"roundedRectangle",w:a+20,h:100,borderRadius:10,borderColor:"black",border:!0,color:"white"}),I.addShape({kind:"text",font:"25px Times News Roman",text:"Click to initiate trade"}),this.leaderBoardObject.hoverEvent((function(){I.display=!0,I.addAnimation("opacity",1,500)}),(function(){I.addAnimation("opacity",0,500,(function(){return I.display=!1}))})),this.leaderBoardObject.pressedEvent((function(){return n()}));var P=0,M=function(){--P?S.addAnimation("opacity",1,500,D):S.addAnimation("opacity",1,500)},D=function(){S.addAnimation("opacity",0,500,M)},B=r/4,W=-r/2+40;this.updateTurn=function(e){S.addAnimation("y",W+e*B,1e3,(function(){P=5,M()}))},this.leaderBoardObject.updateVisual()}},{key:"createActionObject",value:function(){var e=this;this.actionObject=this.app.addObject({y:this.app.canvas.height/2+130,x:this.app.canvas.width-300,display:!1}),this.actionObject.addShape({kind:"roundedRectangle",w:320,h:400,borderRadius:20,color:"white",border:!0,borderColor:"black",borderWidth:5,shadow:{blur:4,offsetX:4,color:"black"}}),this.actionObject.addShape({kind:"text",y:-150,font:"35px Times News Roman",text:"Take Action:",color:"black"});var t=function(t,n){var a=e.actionObject.addShape({kind:"line",y:t,color:"yellow",lineWidth:40,points:[[-150,0],[-150,0]],display:!1}),r=e.actionObject.addShape({kind:"text",y:t,font:"30px Times News Roman",text:n,color:"gray",display:!1});return r.hoverEvent((function(){a.display=!0,a.addAnimation("points.1.0",150,500)}),(function(){a.addAnimation("points.1.0",-150,500,(function(){a.display=!1}))})),r.line=a,r},n=["road","settlement","city","trade","turn","dice"],a=["Build Road \ud83d\udee3\ufe0f","Build Settlement \ud83c\udfe0","Build City \ud83c\udfd9\ufe0f","Initiate Trade \ud83e\udd1d","Pass turn \u27a1\ufe0f","Roll Dice \ud83c\udfb2"],r=[t(-90,""),t(-40,""),t(10,""),t(60,""),t(110,""),t(160,"")];r.forEach((function(t,n){t.pressedEvent((function(){return e.actionFunctions[n]()}))})),this.currentActions=[],this.actionFunctions=[],this.updateActionObjects=function(){if(0===r.length)return e.actionObject.display=!1;e.actionObject.display=!0,r.forEach((function(t,r){e.currentActions[r]?(t.display=!0,t.text=a[n.indexOf(e.currentActions[r])]):t.display=!1,t.line.points=[[-150,0],[-150,0]]})),e.actionObject.updateVisual()}}},{key:"changePlayerResourceCount",value:function(e){var t=e.wheatAmount,n=e.rockAmount,a=e.sheepAmount,r=e.brickAmount,i=e.woodAmount,o=function(e,t,n){t.text=n,e.updateVisual()};void 0!==t&&o.apply(void 0,Object(y.a)(this.wheatCard).concat([t])),void 0!==n&&o.apply(void 0,Object(y.a)(this.rockCard).concat([n])),void 0!==a&&o.apply(void 0,Object(y.a)(this.sheepCard).concat([a])),void 0!==r&&o.apply(void 0,Object(y.a)(this.brickCard).concat([r])),void 0!==i&&o.apply(void 0,Object(y.a)(this.woodCard).concat([i]))}},{key:"createPlayerDeck",value:function(){this.playerUI=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height-100}),this.playerDeck=this.playerUI.addShape({w:this.app.canvas.width,h:250,color:"brown",kind:"rect"}),this.wheatCard=this.addCard(200,"assets/wheatResource.png",-1),this.rockCard=this.addCard(300,"assets/rockResource.png",-1),this.sheepCard=this.addCard(400,"assets/sheepResource.png",-1),this.brickCard=this.addCard(500,"assets/brickResource.png",-1),this.woodCard=this.addCard(600,"assets/woodResource.png",-1)}},{key:"addRobber",value:function(e,t){return this.robberElement.x=this.robberElement.x+e,this.robberElement.y=this.robberElement.y+t,this.robberElement.addShape({kind:"img",spriteLink:"assets/robber.png",y:-20,drawWidth:40})}},{key:"addLayer",value:function(e){var t=[];if(!e)return this.app.addObject({x:this.app.canvas.width/2-270,y:this.app.canvas.height/2-50});for(var n=0;n<e;n++)return t.push(this.app.addObject({x:this.app.canvas.width/2+200,y:this.app.canvas.height/2-50})),t}},{key:"createDevDeck",value:function(){var e=this,t=function(){var t=e.addLayer();return t.x+=500,t.y-=250,t};this.devDeck=t(),this.devDeck.addShape({kind:"roundedRectangle",x:4,h:200,w:137.84,color:"white",borderRadius:15,border:!0,borderColor:"black",borderWidth:5,shadow:{blur:4,color:"black",offsetX:3}}),this.devDeck.addShape({kind:"roundedRectangle",h:200,w:137.84,clip:!0,clipImageLink:"assets/developmentCardBack.png",color:"white",borderRadius:15,border:!0,borderColor:"black",borderWidth:5}),this.popUpDevDeckRectangle=t(),this.popUpDevDeckRectangle.opacity=0,this.popUpDevDeckRectangle.display=!1,this.popUpDevDeckRectangle.addShape({kind:"roundedRectangle",h:100,w:160,color:"white",borderRadius:10,border:!0,borderWidth:5,borderColor:"black"}),this.popUpDevDeckRectangle.addShape({kind:"text",font:"16px Times New Roman",text:"Buy Development Card",y:-30}),this.popUpDevDeckRectangle.addShape({kind:"text",font:"35px Times New Roman",text:"\ud83d\udc11 \u26f0\ufe0f \ud83c\udf3e"}),this.popUpDevDeckRectangle.addShape({kind:"text",font:"20px Times New Roman",text:"5 left",y:30}),this.devDeck.hoverEvent((function(){e.popUpDevDeckRectangle.display=!0,e.popUpDevDeckRectangle.addAnimation("opacity",1,500)}),(function(){e.popUpDevDeckRectangle.addAnimation("opacity",0,500,(function(){e.popUpDevDeckRectangle.display=!1}))})),this.animateDevCard=this.devDeck.addShape({kind:"roundedRectangle",h:200,w:137.84,clip:!0,clipImageLink:"assets/developmentCardBack.png",color:"white",borderRadius:15,border:!0,borderColor:"black",borderWidth:5,display:!1})}},{key:"createDevDeckPlayer",value:function(e,t){var n=this,a=["Monopoly","Knight","Road","Point","Plenty"],r=["assets/monopolyCard.png","assets/knightCard.png","assets/roadCard.png","assets/libraryCard.png","assets/yearOfPlentyCard.png"],i=r.map((function(e,r){var i=n.addCard(0,e);return i[0].display=!1,i[0].pressedEvent((function(){return t[a[r]]()})),i}));this.playerUI.updateVisual();for(var o=[],s=0;s<r.length;s++)console.log(i[0][0]),o.push(this.app.canvas.width-100-.5*i[0][0].shapes[0].width-150*s);var c=[],u=Object(x.a)({},e.myDevCards);this.updateToModel=function(){var t=e.myDevCards;for(var r in u){if(t[r])t[r]!==u[r]&&(console.log(r),i[a.indexOf(r)][1].text=t[r],i[a.indexOf(r)][0].updateVisual());else i[a.indexOf(r)][0].display=!1,c.splice(c.indexOf(r),1),c.forEach((function(e,t){var n=i[a.indexOf(e)],r=o[t];n[0].addAnimation("x",r,1e3)}))}for(var s in console.log("done1"),t)if(!u[s]&&t[s]){var d=c.length;c.push(s);var l=i[a.indexOf(s)];console.log(l),l[0].display=!0,l[0].zIndex=d,l[0].y=n.app.canvas.height+200,l[0].x=o[d],l[1].text=t[s],console.log(d,o),l[0].addAnimation("y",n.app.canvas.height-70,500)}console.log("done2"),n.playerUI.updateVisual(),u=Object(x.a)({},e.myDevCards)}}},{key:"inititiateArray",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];[].concat(n).forEach((function(t){return e[t]=[]}))}},{key:"createBoard",value:function(){var e=this;this.backgroundPoly=this.background.addShape({kind:"poly",radius:460,numberOfSide:6,specialPolygon:!0,color:"#006994",clip:!0,clipImageLink:"assets/background.png"});var t=["assets/rockTile.png","assets/desertTile.png","assets/woodTile.png","assets/wheatTile.png","assets/sheepTile.png","assets/brickTile.png"],n=["Rock","Desert","Wood","Wheat","Sheep","Brick"],a=function(t,n){return e.positionMatrix.forEach((function(a,r){Array.isArray(t)?t.forEach((function(t){return e[t].push([])})):e[t].push([]),a.forEach((function(a,i){var o=Object(d.a)(a,2),s=o[0],c=o[1],u=n(s,c,r,i);u&&(Array.isArray(u)?u.forEach((function(n,a){return e[t[a]][r].push=n})):e[t][r].push(u))}))}))};a("hexMap",(function(a,r,i,o){var s=t[n.indexOf(e.resourceBoard[i+1][o+1])];return e.resourceElement.addShape(Object(x.a)({},e.hexProperty,{x:a,y:r,clip:!0,clipImageLink:s}))}));var r=function(t){return function(n,a,r,i){return e.numberBoard[r+1][i+1]?t(n,a,r,i):null}};a("buttonMap",r((function(t,n){return e.resourceElement.addShape({x:t,y:n,kind:"arc",rad:30,color:"#e8d79b"})}))),a(["numberMap","dotMap"],r((function(t,n,a,r){return e.addNumberTokenToPositionWithNumber(e.numberBoard[a+1][r+1],[t,n])})));var i=["assets/rockTrade.png","assets/wheatTrade.png","assets/randomTrade.png","assets/woodTrade.png","assets/brickTrade.png","assets/sheepTrade.png"],o=["Rock trade","Wheat trade","Random trade","Wood trade","Brick trade","Sheep trade"],s=[[0,2],[0,0],[2,0],[4,0],[6,0],[6,2],[5,4],[3,6],[1,4]];[[70,-364],[-212,-356],[-350,-130],[-360,118],[-208,356],[70,350],[272,230],[402,-24],[262,-256]].forEach((function(t,n){var a=Object(d.a)(t,2),r=a[0],c=a[1],u=Object(d.a)(s[n],2),l=u[0],h=u[1],p=e.resourceBoard[l][h],f=e.portElement.addShape({kind:"img",spriteLink:i[o.indexOf(p)],x:r,y:c,drawWidth:65});f.hoverEvent((function(){return f.addAnimation("drawWidth",130,600)}),(function(){return f.addAnimation("drawWidth",65,600)})),e.portMap.push(f)}))}},{key:"getPositionMatrix",value:function(){var e=this.resourceElement.addShape(Object(x.a)({},this.hexProperty,{display:!1})),t=e.width-2,n=0,a=[[-2*t,0],[-t,0],[0,0],[t,0],[2*t,0]],r=[[-1.5*t,n=.5*(e.height-2)+.5*e.sideLength],[-t/2,n],[.5*t,n],[1.5*t,n]],i=[[-t,2*n],[0,2*n],[t,2*n]],o=[[-1.5*t,n=-n],[-t/2,n],[.5*t,n],[1.5*t,n]],s=[[-t,2*n],[0,2*n],[t,2*n]];this.positionMatrix=[s,o,a,r,i],e.kill()}},{key:"addCard",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=350,i=249.2,o={kind:"roundedRectangle",h:r,w:i,borderRadius:10,borderColor:"yellow",borderWidth:10},s={kind:"arc",rad:30,y:-r/2,x:a*i/2,color:"black",opacity:.4},c={kind:"text",y:-r/2-5,x:a*i/2,color:"white",font:"40px Times News Roman",text:0},u=this.app.addObject({x:e,y:this.app.canvas.height-70}),d=u.addShape(Object(x.a)({},o,{clip:!0,clipImageLink:t})),l=u.addShape(Object(x.a)({},s)),h=u.addShape(Object(x.a)({},c));return u.hoverEvent((function(){u.addAnimation("y",n.app.canvas.height-200,500),d.border=!0,l.addAnimation("opacity",0,500),h.addAnimation("opacity",0,500)}),(function(){u.addAnimation("y",n.app.canvas.height-70,500),l.addAnimation("opacity",1,500),h.addAnimation("opacity",1,500),d.border=!1})),[u,h]}},{key:"createDiceDeck",value:function(){var e=this,t={kind:"roundedRectangle",w:75,h:75,borderRadius:15,borde:!0,borderWidth:5,borderColor:"black"};this.dicePlate=this.diceElement.addShape({kind:"roundedRectangle",w:350,h:150,borderRadius:40,color:"#e20000",border:!0,borderWidth:10,borderColor:"black"}),this.redDice=this.diceElement.addShape(Object(x.a)({},t,{color:"red",x:50})),this.yellowDice=this.diceElement.addShape(Object(x.a)({},t,{color:"yellow",x:-50})),this.diceElement.display=!1;var n=[[1,1],[2,1],[1,3],[3,2],[3,3],[5,2],[5,3],[6,3],[5,5],[6,5],[6,6]];this.rollDiceAnimation=function(t){return new Promise((function(a){var r=Object(d.a)(n[t-2],2),i=r[0],o=r[1];e.diceElement.display=!0;var s=20;setTimeout((function t(){--s>0?(e.showDiceNumber(R(1,6),R(1,6)),setTimeout(t,70)):(e.showDiceNumber(i,o),setTimeout((function(){e.diceElement.display=!1,a()}),2e3))}),70)}))}}},{key:"showDiceNumber",value:function(e,t){var n=this,a=function(e,t,a){e.pips&&e.pips.forEach((function(e){return e.kill()})),e.pips=[];[[[0,0]],[[-20,20],[20,-20]],[[-20,20],[0,0],[20,-20]],[[-20,20],[20,-20],[-20,-20],[20,20]],[[-20,20],[20,-20],[-20,-20],[20,20],[0,0]],[[-20,20],[20,-20],[-20,-20],[20,20],[20,0],[-20,0]]][t-1].forEach((function(t){var r=Object(d.a)(t,2),i=r[0],o=r[1],s=n.diceElement.addShape({kind:"arc",color:a,rad:8,x:e.x+i,y:e.y+o});e.pips.push(s)}))};a(this.redDice,e,"yellow"),a(this.yellowDice,t,"red")}},{key:"addNumberTokenToPositionWithNumber",value:function(e,t){for(var n=Object(d.a)(t,2),a=n[0],r=n[1],i=[],o=this.resourceElement.addShape({x:a,y:r-10,kind:"text",text:"".concat(e),color:6===e||8===e?"red":"black",font:"36px Times New Roman"}),s=[1,2,3,4,5,6,5,4,3,2,1][[2,3,4,5,6,7,8,9,10,11,12].indexOf(e)],c=a-5*s/2+1.5,u=0;u<s;u++)i.push(this.resourceElement.addShape({y:r+14,x:c+5*u,kind:"arc",rad:2,color:6===e||8===e?"red":"black"}));return[o,i]}},{key:"activateCitySelection",value:function(){var e=this;return new Promise((function(t){return e.cityResolveFunction=t}))}},{key:"buildSettlement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentColorCode,a=this.findPositionOfIntersection(e),r=Object(d.a)(a,2),i=r[0],o=r[1],s=this.structureElement.addShape({kind:"poly",x:i,y:o,color:n,points:[[10,-7],[0,-17],[-10,-7],[-10,7],[10,7]],border:!0,borderColor:"black",borderWidth:6,shadow:{blur:2,offsetX:1,color:"black"}});return this.settlements.push(s),this.structures.push(s),s.pressedEvent((function(){t.cityResolveFunction&&(t.cityResolveFunction(e),t.cityResolveFunction=null)})),s}},{key:"buildCity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentColorCode,n=this.findPositionOfIntersection(e),a=Object(d.a)(n,2),r=a[0],i=a[1],o=this.structures.find((function(e){return Math.round(e.x)===Math.round(r)&&Math.round(e.y)===Math.round(i)}));console.log(o),o.kill(),this.structures=this.structures.filter((function(e){return Math.round(e.x)!==Math.round(r)&&Math.round(e.y)!==Math.round(i)})),this.settlements=this.settlements.filter((function(e){return Math.round(e.x)!==Math.round(r)&&Math.round(e.y)!==Math.round(i)}));var s=this.structureElement.addShape({kind:"poly",x:r,y:i,color:t,points:[[8,-7],[0,-17],[-8,-7],[-8,17],[25,17],[25,2],[8,2]],border:!0,borderColor:"black",borderWidth:6,shadow:{blur:2,offsetX:1,color:"black"}});return this.settlements.push(s),this.cities.push(s),s}},{key:"buildRoad",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentColorCode,a=this.findPositionOfIntersection(e),r=Object(d.a)(a,2),i=r[0],o=r[1],s=this.findPositionOfIntersection(t),c=Object(d.a)(s,2),u=c[0],l=c[1],h=S(T(i,o,u,l)),p=S(T(u,l,i,o)),f=7;i+=Math.cos(h)*f,o-=Math.sin(h)*f,u+=Math.cos(p)*f,l-=Math.sin(p)*f;var m=this.roadElement.addShape({kind:"line",lineWidth:6,points:[[i,o],[u,l]],color:n,border:!0,borderWidth:3,borderColor:"black",shadow:{blur:7,color:"black",offsetX:3}});return this.roads.push(m),m}},{key:"findPositionOfIntersection",value:function(e){var t,n,a,r=this.translateToViewCoordinate.apply(this,Object(y.a)(e.flat())),i=Object(d.a)(r,6),o=i[0],s=i[1],c=i[2],u=i[3],l=i[4],h=i[5];o===c?(n=[l,h],a=l-c):o===l?(n=[c,u],a=c-o):(n=[o,s],a=o-c);var p=n,f=Object(d.a)(p,2),m=f[0],b=f[1];if(m<0||m>=this.hexMap.length||b<0||b>=this.hexMap[m].length){var v=[[o,s],[c,u],[l,h]].filter((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return!(n===m&&a===b)})).sort((function(e,t){var n=Object(d.a)(e,2),a=(n[0],n[1]),r=Object(d.a)(t,2);r[0];return a-r[1]})),g=this.hexMap[v[0][0]][v[0][1]],x=this.hexMap[v[1][0]][v[1][1]],k=g?g.findVertex()[a>0?4:5]:x.findVertex()[a>0?2:1],w=Object(d.a)(k,2),O=w[0],j=w[1];return this.resourceElement.findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(O,j)}var R=this.hexMap[m][b];return(t=this.resourceElement).findThePositionThatIsRelativeToThisObjectFromAbsolutePosition.apply(t,Object(y.a)(R.findVertex()[a>0?0:3]))}},{key:"translateToViewCoordinate",value:function(){var e,t=[],n=Object(g.a)(arguments);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a-1)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"doThisActionOnAllHex",value:function(e){this.hexMap.forEach((function(t,n){return t.forEach((function(t,a){return e(t,a,n)}))}))}},{key:"doThisActionOnAllButton",value:function(e){this.buttonMap.forEach((function(t,n){return t.forEach((function(t,a){return e(t,a,n)}))}))}},{key:"doThisActionOnAllNumber",value:function(e){this.numberMap.forEach((function(t,n){return t.forEach((function(t,a){return e(t,a,n)}))}))}},{key:"currentColorCode",get:function(){return this.colorCode[this.turnObject.turn]}}]),e}(),K=function(e,t){var n=Object(d.a)(e,2),a=n[0],r=n[1],i=Object(d.a)(t,2),o=i[0],s=i[1];return a===o&&r===s},G=function(e,t){var n,a=Object(y.a)(e),r=Object(y.a)(t),i=Object(g.a)(r);try{for(i.s();!(n=i.n()).done;){for(var o=n.value,s=!1,c=0;c<a.length;c++)if(K(a[c],o)){s=!0,a.splice(c,1);break}if(!s)return!1}}catch(u){i.e(u)}finally{i.f()}return!0},H=function(e,t){var n,a=Object(g.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(G(e,r))return!0}}catch(i){a.e(i)}finally{a.f()}return!1},Q=function(){function e(){Object(k.a)(this,e),this.allGridLocation=[[0,0,1,0,1,1],[0,0,1,1,0,1],[0,1,1,1,1,2],[0,1,1,2,0,2],[0,2,1,2,1,3],[0,2,0,3,1,3],[0,3,1,3,1,4],[1,0,2,0,2,1],[1,0,2,1,1,1],[1,1,2,1,2,2],[1,1,2,2,1,2],[1,2,2,3,1,3],[1,2,2,2,2,3],[1,3,2,3,2,4],[1,3,1,4,2,4],[1,4,2,4,2,5],[2,0,3,0,3,1],[2,0,3,1,2,1],[2,1,3,1,3,2],[2,1,2,2,3,2],[2,2,3,2,3,3],[2,2,3,3,2,3],[2,3,3,3,3,4],[2,3,3,4,2,4],[2,4,3,4,3,5],[2,4,2,5,3,5],[2,5,3,5,3,6],[3,0,4,0,3,1],[3,1,4,0,4,1],[3,1,4,1,3,2],[3,2,4,2,3,3],[3,2,4,1,4,2],[3,3,4,2,4,3],[3,3,3,4,4,3],[3,4,4,3,4,4],[3,4,3,5,4,4],[3,5,4,4,4,5],[3,5,3,6,4,5],[4,0,5,0,4,1],[4,1,5,0,5,1],[4,1,4,2,5,1],[4,2,5,1,5,2],[4,2,5,2,4,3],[4,3,5,2,5,3],[4,3,4,4,5,3],[4,4,5,3,5,4],[4,4,4,5,5,4],[5,0,5,1,6,0],[5,1,6,0,6,1],[5,1,5,2,6,1],[5,2,6,1,6,2],[5,2,6,2,5,3],[5,3,6,2,6,3],[5,3,5,4,6,3]].map((function(e){return j.a.chunk(e,2)}))}return Object(w.a)(e,[{key:"loadData",value:function(e){var t=e.grid,n=e.playerUsernames;this.grid=t,this.usernames=n,this.vpPlayers=this.usernames.map((function(e){return 0})),this.resourcePlayers=this.usernames.map((function(e){return 0})),this.devCardPlayers=this.usernames.map((function(e){return 0})),this.settlements=this.usernames.map((function(e){return[]})),this.cities=this.usernames.map((function(e){return[]})),this.roads=this.usernames.map((function(e){return[]})),this.myDevCards={},this.wheatAmount=0,this.sheepAmount=0,this.rockAmount=0,this.brickAmount=0,this.woodAmount=0,this.tradingPriveleges={},this.playerid=n.length-1,this.longestRoadPlayer=-1,this.largestArmyPlayer=-1}},{key:"updateLeaderBoard",value:function(){var e=this,t=0;for(var n in this.myDevCards)t+=this.myDevCards[n];this.devCardPlayers[this.playerid]=t;var a=this.wheatAmount+this.sheepAmount+this.rockAmount+this.woodAmount+this.brickAmount;this.resourcePlayers[this.playerid]=a,this.vpPlayers=this.vpPlayers.map((function(t,n){var a=e.settlements[n].length+2*e.cities[n].length;return e.longestRoadPlayer===n&&(a+=2),e.largestArmyPlayer===n&&(a+=2),a}))}},{key:"newPlayer",value:function(e){var t=e.username;this.usernames.push(t),this.vpPlayers.push(0),this.resourcePlayers.push(0),this.devCardPlayers.push(0),this.settlements.push([]),this.cities.push([]),this.roads.push([])}},{key:"findAdjacentPositionsTo",value:function(e){var t=this,n=function(e){var n=Object(d.a)(e,2),a=n[0],r=n[1];return a<t.grid.resourceBoard.length&&a>=0&&r>=0&&r<t.grid.resourceBoard[a].length},a=Object(d.a)(e,3),r=Object(d.a)(a[0],1)[0],i=Object(d.a)(a[1],1)[0],o=Object(d.a)(a[2],1)[0],s=r===i?e[2]:i===o?e[0]:e[1],c=e.filter((function(e){return e!==s}));c.sort((function(e,t){var n=Object(d.a)(e,2),a=(n[0],n[1]),r=Object(d.a)(t,2);r[0];return a-r[1]}));var u=s[0]-c[0][0],l=Object(d.a)(s,2),h=l[0],p=l[1],f=[h,p-1],m=[h,p+1],b=[];n(f)&&b.push([s,c[0],f]),n(m)&&b.push([s,c[1],m]);var v=c[0][0]-u;if(v>=0&&v<this.grid.resourceBoard.length){var g=this.grid.resourceBoard[c[0][0]].length-this.grid.resourceBoard[v].length,x=[v,c[0][1]+(g<0?1:0)];n(x)&&b.push([x].concat(Object(y.a)(c)))}return b}},{key:"compareRoad",value:function(e,t){var n=Object(d.a)(e,2),a=n[0],r=n[1],i=Object(d.a)(t,2),o=i[0],s=i[1];return G(a,o)&&G(r,s)||G(a,s)&&G(r,o)}},{key:"doesThisRoadAlreadyExist",value:function(e){var t,n=Object(g.a)(this.roads);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,i=Object(g.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(this.compareRoad(e,o))return!0}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"buyDevCard",value:function(e){this.myDevCards[e]=this.myDevCards[e]?this.myDevCards[e]+1:1}},{key:"validPlaceToBuildAStructure",value:function(e){var t,n=this.findAdjacentPositionsTo(e),a=Object(g.a)(this.settlements);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(H(e,r))return!1;var i,o=Object(g.a)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(H(s,r))return!1}}catch(f){o.e(f)}finally{o.f()}}}catch(f){a.e(f)}finally{a.f()}var c,u=Object(g.a)(this.cities);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(H(e,d))return!1;var l,h=Object(g.a)(n);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(H(p,d))return!1}}catch(f){h.e(f)}finally{h.f()}}}catch(f){u.e(f)}finally{u.f()}return!0}},{key:"possibleRoadsInitial",value:function(e){var t=this,n=this.findAdjacentPositionsTo(e),a=[];return n.forEach((function(n){t.doesThisRoadAlreadyExist([e,n])||a.push([e,n])})),a}},{key:"selfBuildRoad",value:function(e){this.selfRoad.push(e)}},{key:"buildRoad",value:function(e,t){this.roads[t].push(e)}},{key:"selfBuildSettlement",value:function(e){var t=this;e.forEach((function(e){var n=Object(d.a)(e,2),a=n[0],r=n[1];switch(t.grid.resourceBoard[a][r]){case"Random trade":t.tradingPriveleges.randomTrade=!0;break;case"Wood trade":t.tradingPriveleges.woodTrade=!0;break;case"Sheep trade":t.tradingPriveleges.sheepTrade=!0;break;case"Brick trade":t.tradingPriveleges.brickTrade=!0;break;case"Rock trade":t.tradingPriveleges.rockTrade=!0;break;case"Wheat trade":t.tradingPriveleges.wheatTrade=!0}})),this.selfSettlement.push(e)}},{key:"addResourceInitial",value:function(e){var t=this,n=["Wheat","Rock","Sheep","Brick","Wood"];Object(y.a)(e).filter((function(e){return n.includes(e)})).forEach((function(e){return t["".concat(e.toLowerCase(),"Amount")]++}))}},{key:"buildSettlement",value:function(e,t){this.settlements[t].push(e)}},{key:"selfBuildCity",value:function(e){this.settlements[this.playerid]=this.settlements[this.playerid].filter((function(t){return!G(t,e)})),this.cities[this.playerid].push(e)}},{key:"buildCity",value:function(e,t){this.settlements[t]=this.settlements[t].filter((function(t){return!G(e,t)})),this.cities[t].push(e)}},{key:"changeRobberPostion",value:function(e,t){this.grid.robberPosition=[e,t]}},{key:"whoHaveCityOnThisHex",value:function(e,t){}},{key:"useDevelopmentCard",value:function(e){this.myDevCards[e]--}},{key:"findWhoToStealFrom",value:function(e){var t=[];e:for(var n=0;n<this.usernames.length;n++)if(n!==this.playerid)for(var a=0;a<this.settlements[n].length;a++){var r=this.settlements[n][a];if(r[0]===e||r[1]===e||r[2]===e){t.push(n);continue e}}return t}},{key:"addResource",value:function(e){for(var t in e)this["".concat(t.toLowerCase(),"Amount")]+=e[t]}},{key:"minusResource",value:function(e){for(var t in e)this["".concat(t.toLowerCase(),"Amount")]-=e[t]}},{key:"changeResourceMonopoly",value:function(e,t,n){for(var a=0;a<e.length;a++)a===n?(this.resourcePlayers[a]+=e[a],n===this.playerid&&(this.playerid["".concat(t.toLowerCase,"Amount")]+=e[a])):this.resourcePlayers[a]-=e[a]}},{key:"canBuildCity",get:function(){return!(this.rockAmount<3&&this.wheatAmount<2)&&(0!==this.selfSettlement.length&&4!==this.selfCity.length)}},{key:"canBuildSettlement",get:function(){return!!(this.wheatAmount&&this.sheepAmount&&this.woodAmount&&this.brickAmount)&&(!(this.selfSettlement.length>=5)&&0!==this.possibleSettlements.length)}},{key:"canBuildRoad",get:function(){return!(!this.brickAmount||!this.woodAmount)&&(!(this.selfRoad.length>=14)&&0!==this.possibleRoads.length)}},{key:"possibleActions",get:function(){var e=[];return this.canBuildCity&&e.push("city"),this.canBuildSettlement&&e.push("settlement"),this.canBuildRoad&&e.push("road"),e}},{key:"possibleRoads",get:function(){var e=this,t=[],n=[],a=function(e){var t,a=Object(g.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(G(r,e))return!1}}catch(i){a.e(i)}finally{a.f()}return!0};return this.selfRoad.forEach((function(r){var i=Object(d.a)(r,2),o=i[0],s=i[1];a(o)&&(e.findAdjacentPositionsTo(o).forEach((function(n){e.doesThisRoadAlreadyExist([o,n])||t.push([o,n])})),n.push(o));a(s)&&(e.findAdjacentPositionsTo(s).forEach((function(n){e.doesThisRoadAlreadyExist([s,n])||t.push([s,n])})),n.push(s))})),t}},{key:"possibleSettlementsInitial",get:function(){var e=this;return console.log(this.allGridLocation),this.allGridLocation.filter((function(t){return e.validPlaceToBuildAStructure(t)}))}},{key:"possibleSettlements",get:function(){var e,t=this,n=Object(y.a)(this.selfRoad).flat(1),a=[],r=Object(g.a)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;a.includes(i)||a.push(i)}}catch(o){r.e(o)}finally{r.f()}return a.filter((function(e){return t.validPlaceToBuildAStructure(e)}))}},{key:"selfSettlement",get:function(){return this.settlements[this.playerid]}},{key:"selfRoad",get:function(){return this.roads[this.playerid]}},{key:"selfCity",get:function(){return this.cities[this.playerid]}},{key:"selfUsername",get:function(){return this.usernames[this.playerid]}},{key:"selfCanBuyDevelopmentCard",get:function(){return this.wheatAmount&&this.rockAmount&&this.sheepAmount}}]),e}(),q=n(119),z=n.n(q),J=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a,r,i,o,s,l,h,p,f,m,b,v,x,k,w,O,j,R,E,C,T,A,S,I,P,M,D,B,W,L,N,V,X,Y,F,K,G,H;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=z.a.connect("/",{query:{token:n}}),r=function(e,t){console.log(e,t),a.emit(e,t)},o=(i=["Trade with Bank","Trade Response","Trade Refuse","Trade Acceptance","Trade Initiation","Waiting for Choose Road location","Road location chosen","Choose Road location","Waiting for Choose Knight location","Waiting for Discard Cards","Discard Cards","Monopoly resource chosen","Use development card","Choose Monopoly resources","Monopoly resource chosen","Cheat Done","Cheat","Build Settlement Initial","Build Road Initial","Build road","Build settlements","Build city","Your development card","Cheat Done","Error","Start turn timer","Cancel turn timer","Game starting","Action Needed","Move Knight","Resource Stolen","New player","Game data","Dice Result","Plenty card chosen","Change in extra condition","Waiting for Choose Settlement Resources","Waiting for Build Settlement Initial","Waiting for Build Road Initial"]).map((function(e){return function(){}})),s=i.map((function(e){return[]})),l=i.map((function(e){return[]})),h=["wheat","rock","sheep","wood","brick"],p=function(e){var t={};return e.forEach((function(e,n){return t[h[n]]=e})),t},f=function(e,t,n){-1!==i.indexOf(e)&&(o[i.indexOf(e)]=t)},m=function(e){return new Promise((function(t,n){s[i.indexOf(e)].push(t),l[i.indexOf(e)].push(n)}))},b=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),a=i.indexOf(t),e.next=4,o[a](n);case 4:s[a].forEach((function(e){return e(n)})),s[a]=[],l[a]=[];case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){w.updateLeaderBoard(),k.updateLeaderBoard()},i.forEach((function(e){return a.on(e,(function(t){return b(e,t)}))})),x={turnSpecificInfo:{},startRobberDrag:function(){},phase:0},k=new U(t),w=new Q,O=["blue","red","white","orange","black"],j=function(e,t){k.onAnnouncementPerpetual=!0,k.changeAnnoucementPerpetual(e,O[t])},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.turn;k.addToAnnoucementQueue(e,O[t],1e3)},E=function(){k.onAnnouncementPerpetual=!1,k.updateAnnouncement()},k.configureColorCode(O,x),f("Error",(function(e){var t=e.error;j(t),console.log(t),l.forEach((function(e,n){if(e.length>0){var a,r=Object(g.a)(e);try{for(r.s();!(a=r.n()).done;){(0,a.value)(t)}}catch(i){r.e(i)}finally{r.f()}}l[n]=[],s[n]=[]}))})),f("Game data",(function(e){var t=e.gameData;j("Room Code: ".concat(t.roomCode)),w.loadData(t),k.receiveData(t),k.createLeaderboardObject(w,K),k.createTradingObject(w.usernames,w),k.configureStealInterface(w),k.createDevDeckPlayer(w,W);var n=k.robberElement.x,a=k.robberElement.y,i=function(){},o=0,s=0;k.robberElement.makeDraggable(null,(function(){var e,t,r;e:for(var c=0;c<k.hexMap.length;c++)for(var u=0;u<k.hexMap[c].length;u++)if((c+1!==o||u+1!==s)&&k.hexMap[c][u].pointInShape(k.robberElement.x,k.robberElement.y)){e=[c,u],t=k.hexMap[c][u],i([c+1,u+1]);break e}e?(k.robberElement.addAnimation("x",t.absoluteX,500),k.robberElement.addAnimation("y",t.absoluteY,500),k.robberElement.draggable=!1):(k.robberElement.addAnimation("x",n,500,r),k.robberElement.addAnimation("y",a,500))})),k.robberElement.draggable=!1,x.startRobberDrag=function(){return n=k.robberElement.x,a=k.robberElement.y,o=w.grid.robberPosition[0],s=w.grid.robberPosition[1],k.robberElement.draggable=!0,new Promise((function(e){i=e}))},k.initiateStartGameMessage((function(){return r("Start game")}))})),f("New player",(function(e){console.log(e),w.newPlayer(e),v()})),f("Game starting",Object(u.a)(c.a.mark((function e(){var t,n,a,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.turnOffStartGameMessage(),j("The game is starting"),e.next=4,m("Waiting for Build Settlement Initial");case 4:return j("Please choose where to put your settlement:"),e.next=7,k.selectSettlementLocationFrom(w.possibleSettlementsInitial);case 7:return t=e.sent,k.buildSettlement(t,O[w.playerid]),w.selfBuildSettlement(t),r("Build Settlement Initial",{position:t}),e.next=13,m("Build Settlement Initial");case 13:return n=e.sent,a=n.resource,w.addResourceInitial(a),e.next=18,m("Waiting for Build Road Initial");case 18:return j("Please choose where to put your road:"),e.next=21,k.selectRoadLocation(w.possibleRoadsInitial(t));case 21:return i=e.sent,k.buildRoad(i[0],i[1],O[w.playerid]),w.selfBuildRoad(i),r("Build Road Initial",{roadPosition:i,settlementPosition:t}),e.next=27,m("Build Road Initial");case 27:return e.next=29,m("Waiting for Build Settlement Initial");case 29:return j("Please choose where to put your settlement:"),e.next=32,k.selectSettlementLocationFrom(w.possibleSettlementsInitial);case 32:return o=e.sent,k.buildSettlement(o,O[w.playerid]),w.selfBuildSettlement(o),r("Build Settlement Initial",{position:o}),e.next=38,m("Build Settlement Initial");case 38:return s=e.sent,a=s.resource,w.addResourceInitial(a),e.next=43,m("Waiting for Build Road Initial");case 43:return j("Please choose where to put your road:"),e.next=46,k.selectRoadLocation(w.possibleRoadsInitial(o));case 46:return u=e.sent,k.buildRoad.apply(k,Object(y.a)(u).concat([O[w.playerid]])),w.selfBuildRoad(u),r("Build Road Initial",{roadPosition:u,settlementPosition:o}),e.next=52,m("Build Road Initial");case 52:E();case 53:case"end":return e.stop()}}),e)})))),C=function(){x.phase=1,k.currentActions=["dice","trade"],k.actionFunctions=k.currentActions.map((function(e){return M[e]})),k.updateActionObjects()},T=function(){x.phase=2,k.currentActions=["trade"].concat(Object(y.a)(w.possibleActions),["turn"]),k.actionFunctions=k.currentActions.map((function(e){return M[e]})),k.updateActionObjects()},A=function(){x.phase=3,k.currentActions=[],k.actionFunctions=[],k.updateActionObjects()},S=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A(),t.prev=1,t.next=4,e(n);case 4:k.changePlayerResourceCount(w),v(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e)(n);case 2:C();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e)(n);case 2:T();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,a,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("Waiting for Choose Knight location");case 2:return j("Please choose robber location:"),e.next=5,x.startRobberDrag();case 5:return t=e.sent,w.changeRobberPostion.apply(w,Object(y.a)(t)),r("Choose Knight location",t),n=w.findWhoToStealFrom(t),e.next=11,m("Move Knight");case 11:if(!n.length){e.next=24;break}return j("Who do you want to steal from?"),e.next=15,k.initiateStealFromOther(n,n.map((function(e){return O[e]})));case 15:return a=e.sent,r("Choose who to steal from",a),e.next=19,m("Resource Stolen");case 19:i=e.sent,o=i.resource,s=i.robbed,w[o]+=1,w.resourcePlayers[s]--;case 24:E();case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f("Discard Cards",function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.resource,a=t.id,r=n.wheat+n.sheep+n.rock+n.brick+n.wood,a===w.playerid?w.minusResource(n):w.resourcePlayers[a]-=r;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f("Dice Result",function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dice,a=t.resource,j("".concat(w.usernames[x.turn]," rolled ").concat(n),x.turn),e.next=4,k.rollDiceAnimation(n);case 4:if(7===n){e.next=11;break}a[w.playerid].forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];w["".concat(n.toLowerCase(),"Amount")]+=a})),k.changePlayerResourceCount(w),E(),e.next=21;break;case 11:if(!((i=w.wheatAmount+w.sheepAmount+w.rockAmount+w.brickAmount+w.woodAmount)>7)){e.next=19;break}return j("You have more than 7 cards!",w.playerid),e.next=16,k.initiateSteal(Math.ceil(i/2));case 16:o=e.sent,o=p(o),r("Discard Cards",{resource:o});case 19:return e.next=21,P();case 21:E();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M={dice:S(Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("Roll Dice"),e.next=3,m("Dice Result");case 3:T();case 4:case"end":return e.stop()}}),e)})))),trade:function(){K()},settlement:I(Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("Settlement where?"),e.next=3,k.selectSettlementLocationFrom(w.possibleSettlements);case 3:return t=e.sent,E(),r("Build settlements",{position:t}),e.next=8,m("Build settlements");case 8:k.buildSettlement(t),w.selfBuildSettlement(t),w.sheepAmount--,w.wheatAmount--,w.brickAmount--,w.woodAmount--,k.changePlayerResourceCount(w);case 15:case"end":return e.stop()}}),e)})))),city:I(Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("Click on a settlement to upgrade:"),e.next=3,k.activateCitySelection();case 3:return t=e.sent,E(),r("Build city",{position:t}),e.next=8,m("Build city");case 8:k.buildCity(t),w.selfBuildCity(t),w.rockAmount-=3,w.wheatAmount-=2,k.changePlayerResourceCount(w);case 13:case"end":return e.stop()}}),e)})))),road:I(Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("Road where?"),e.next=3,k.selectRoadLocation(w.possibleRoads);case 3:return t=e.sent,E(),r("Build road",{position:t}),e.next=8,m("Build road");case 8:console.log(t),k.buildRoad(t[0],t[1]),w.selfBuildRoad(t),w.brickAmount--,w.woodAmount--,k.changePlayerResourceCount(w);case 14:case"end":return e.stop()}}),e)})))),turn:function(){r("Pass Turn"),A()}},f("Action Needed",(function(e){var t=e.turn;k.changePlayerResourceCount(w),v(),x.turnSpecificInfo={},t===w.playerid?C():(A(),j("".concat(w.usernames[t]," is playing his turn."),O[t])),x.turn=t,k.updateTurn(t)})),B=function(e,t){return D(e,function(){var n=Object(u.a)(c.a.mark((function n(a){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(2===a){n.next=2;break}throw Error();case 2:return r("Use development card",{card:e}),n.next=5,m("Use development card");case 5:return w.useDevelopmentCard(e),k.updateToModel(),n.next=9,t();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},W={Knight:(D=function(e,t){return Object(u.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("playing dev card",e,t),!x.turnSpecificInfo.playedDevelopmentCard){n.next=3;break}return n.abrupt("return");case 3:if(x.turnSpecificInfo.playedDevelopmentCard=!0,a=x.phase,3!==x.phase){n.next=7;break}return n.abrupt("return");case 7:return A(),n.prev=8,n.next=11,t(a);case 11:k.changePlayerResourceCount(w),v(),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(8),console.log(n.t0);case 18:console.log("hello"),console.log(a),1===a?C():T();case 21:case"end":return n.stop()}}),n,null,[[8,15]])})))})("Knight",Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("Use development card",{card:"Knight"}),e.next=3,m("Use development card");case 3:return w.useDevelopmentCard("Knight"),k.updateToModel(),e.next=7,P();case 7:case"end":return e.stop()}}),e)})))),Point:function(){},Plenty:B("Plenty",Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.initiatePlenty();case 2:return t=e.sent,t=p(t),r("Choose Plenty resources",t),console.log("hello"),e.next=8,m("Plenty card chosen");case 8:console.log("hello1"),w.addResource(t),console.log(t),k.changePlayerResourceCount(w);case 12:case"end":return e.stop()}}),e)})))),Monopoly:B("Monopoly",Object(u.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.initiateMonpolyResourceChoosing();case 2:return t=e.sent,r("Choose Monopoly resources",t),e.next=6,m("Monopoly resource chosen");case 6:n=e.sent,a=n.change,console.log(a),w.changeResourceMonopoly(a,t,w.playerid),k.changePlayerResourceCount(w);case 11:case"end":return e.stop()}}),e)})))),Road:B("Road",Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("Waiting for Choose Road location");case 2:if(!(w.selfRoad.length>=13)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,k.selectRoadLocation(w.possibleRoads);case 6:return t=e.sent,console.log(t),k.buildRoad.apply(k,Object(y.a)(t)),w.buildRoad(t,w.playerid),e.next=12,k.selectRoadLocation(w.possibleRoads);case 12:return n=e.sent,k.buildRoad.apply(k,Object(y.a)(n)),w.buildRoad(n,w.playerid),r("Choose Road location",{positions:[t,n]}),e.next=18,m("Road location chosen");case 18:case"end":return e.stop()}}),e)}))))},L=!1,k.devDeck.pressedEvent(Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=2;break}return e.abrupt("return");case 2:if(w.selfCanBuyDevelopmentCard){e.next=4;break}return e.abrupt("return");case 4:if(w.playerid!==x.turn||x.turnSpecificInfo.boughtDevelopmentCard){e.next=20;break}return L=!0,x.turnSpecificInfo.boughtDevelopmentCard=!0,r("Buy development card"),e.next=10,m("Your development card");case 10:t=e.sent,n=t.card,w.buyDevCard(n),k.animateDevCardToPlayerDeck(),k.updateToModel(),w.wheatAmount--,w.sheepAmount--,w.rockAmount--,k.changePlayerResourceCount(w),L=!1;case 20:case"end":return e.stop()}}),e)})))),f("Change in extra condition",(function(e){var t=e.armyChange,n=e.roadChange;t&&(w.largestArmyPlayer=t),n&&(w.longestRoadPlayer=n),v()})),N=function(e){return Object(u.a)(c.a.mark((function t(){var n=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x.turn!==w.playerid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.apply(void 0,n);case 4:v();case 5:case"end":return t.stop()}}),t)})))},(V=function(e,t){return f(e,N(t))})("Build settlements",(function(e){var t=e.position;w.buildSettlement(t,x.turn),k.buildSettlement(t,O[x.turn]),w.resourcePlayers[x.turn]-=4,R("".concat(w.usernames[x.turn]," is building a settlement"))})),V("Build city",(function(e){var t=e.position;w.buildCity(t,x.turn),k.buildCity(t,O[x.turn]),w.resourcePlayers[x.turn]-=5,R("".concat(w.usernames[x.turn]," is building a city"))})),V("Build road",(function(e){var t=e.position;w.buildRoad(t,x.turn),k.buildRoad.apply(k,Object(y.a)(t).concat([O[x.turn]])),w.resourcePlayers[x.turn]-=2,R("".concat(w.usernames[x.turn]," is building a road"))})),V("Use development card",(function(e){var t=e.card;R("".concat(w.usernames[x.turn]," is playing a ").concat(t," development card")),w.devCardPlayers[x.turn]--})),V("Buy development card",(function(){R("".concat(w.usernames[x.turn]," is buying a development card")),w.devCardPlayers[x.turn]++})),V("Move Knight",(function(e){var t=e.position;w.grid.robberPosition=t,k.moveRobber(t)})),V("Resource Stolen",(function(e){var t=e.resource,n=e.robbed;n===w.playerid?w[t]++:(w.resourcePlayers[n]--,w.resourcePlayers[x.turn]++)})),V("Plenty card chosen",(function(){w.resourcePlayers[x.turn]+=2})),V("Build Settlement Initial",(function(e){var t=e.position,n=e.resource,a=e.turn;w.resourcePlayers[a]+=n.length,w.buildSettlement(t,a),k.buildSettlement(t,O[a]),R("".concat(w.usernames[a]," built a settlement"),O[a])})),V("Build Road Initial",(function(e){var t=e.roadPosition,n=e.turn;w.buildRoad(t,n),k.buildRoad.apply(k,Object(y.a)(t).concat([O[n]])),R("".concat(w.usernames[n]," built a road"),O[n])})),V("Monopoly resource chosen",(function(e){var t=e.resource,n=e.change;w.changeResourceMonopoly(n,t,x.turn),R("".concat(w.usernames[x.turn]," steal everyones ").concat(t.toLowerCase(),"!"))})),V("Road location chosen",(function(e){var t=e.positions;w.buildRoad(t[0],x.turn),w.buildRoad(t[1],x.turn),k.buildRoad.apply(k,Object(y.a)(t[0]).concat([O[x.turn]])),setTimeout((function(){k.buildRoad.apply(k,Object(y.a)(t[1]).concat([O[x.turn]]))}),1e3)})),f("End game",(function(e){var t=e.winner;j("".concat(w.usernames[t]," had won the game!"))})),X=[],Y=[],F=function(e){var t=X.indexOf(e);X.splice(t,1),Y.splice(t,1)},K=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,a,i,o,s,u,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("ehllo"),e.next=4,k.initiateTrade();case 4:if(t=e.sent,n=Object(d.a)(t,4),a=n[0],i=n[1],o=n[2],s=n[3],console.log(a,i,o,s),i=p(i),o=p(o),"bank"!==a){e.next=21;break}return r("Trade with Bank",{resource:[i,o]}),e.next=17,m("Trade with Bank");case 17:w.addResource(o),w.minusResource(i),e.next=29;break;case 21:return r("Trade Initiation",{resources:[i,o],players:s.map((function(e){return w.usernames.indexOf(e)}))}),e.next=24,m("Trade Initiation");case 24:u=e.sent,l=u.codes,h=u.players,l.forEach((function(e){return X.push(e)})),h.forEach((function(e){return Y.push(e)}));case 29:e.next=33;break;case 31:e.prev=31,e.t0=e.catch(0);case 33:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){return[e.wheat,e.rock,e.sheep,e.wood,e.brick]},H=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i){var o,s,u,l,h,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.receiveTrade(t,G(n),G(a));case 3:if(o=e.sent,s=Object(d.a)(o,4),u=s[0],s[1],l=s[2],h=s[3],"Accept"!==u){e.next=20;break}return r("Trade Acceptance",{code:i,resources:[a,n]}),p=-G(n).reduce((function(e,t){return e+t}),0)+G(a).reduce((function(e,t){return e+t}),0),w.resourcePlayers[Y.indexOf(i)]+=p,w.minusResource(n),w.addResource(a),e.next=17,m("Trade Acceptance");case 17:F(i),e.next=23;break;case 20:return r("Trade Response",{resources:[l,h],code:i}),e.next=23,m("Trade Response");case 23:e.next=32;break;case 25:return e.prev=25,e.t0=e.catch(0),console.log(e.t0),r("Trade Refuse"),F(i),e.next=32,m("Trade Refuse");case 32:k.changePlayerResourceCount(w);case 33:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),f("Trade Response",function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.code,a=t.resources,X.includes(n)){e.next=3;break}return e.abrupt("return");case 3:r=Object(d.a)(a,2),i=r[0],o=r[1],s=w.usernames[Y.indexOf(n)],H(s,i,o,n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V("Trade Initiation",(function(e){var t=e.players,n=e.codes,a=e.resources;t.includes(w.playerid)&&(X.push(n[t.indexOf(w.playerid)]),Y.push(x.turn),H(x.turn,a[1],a[0],n[t.indexOf(w.playerid)]))})),f("Trade Refuse",(function(e){var t=e.code;X.includes(t)&&F(t)})),f("Trade Acceptance",(function(e){var t=e.code,n=e.resources,a=e.players;if(X.includes(t)){var r=Y[X.indexOf(t)];F(t);var i=Object(d.a)(n,2),o=i[0],s=i[1],c=-G(o).reduce((function(e,t){return e+t}),0)+G(s).reduce((function(e,t){return e+t}),0);w.resourcePlayers[r]+=c,w.minusResource(o),w.addResource(s),k.changePlayerResourceCount(w)}else{var u=Object(d.a)(a,2),l=u[0],h=u[1],p=Object(d.a)(n,2),f=p[0],m=p[1],b=-G(f).reduce((function(e,t){return e+t}),0)+G(m).reduce((function(e,t){return e+t}),0);w.resourcePlayers[l]-=b,w.resourcePlayers[h]+=b}})),V("Trade with Bank",(function(e){var t=e.resource,n=Object(d.a)(t,2),a=n[0],r=n[1],i=-G(a).reduce((function(e,t){return e+t}),0)+G(r).reduce((function(e,t){return e+t}),0);w.resourcePlayers[x.turn]+=i}));case 68:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=f.a.create({baseURL:"/"}),Z=function(e,t){return $({method:"POST",url:e,data:t})};var _=function(){var e=Object(a.useRef)(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),i=n[0],o=n[1],s=Object(a.useRef)(),p=Object(h.a)().shape({username:Object(h.b)(),roomCode:Object(h.b)()}),f=function(e){s.current=e,o(!0)},y=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.roomCode,e.next=3,Z("/register",{username:n,roomCode:a});case 3:if(r=e.sent.data,i=r.error,o=r.message,s=r.token,!i){e.next=11;break}return e.abrupt("return",m.a.error(o||"An error occur"));case 11:f(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,e.next=3,Z("/create",{username:n});case 3:if(a=e.sent.data,r=a.error,i=a.message,o=a.token,!r){e.next=11;break}return e.abrupt("return",m.a.error(i||"An error occur"));case 11:f(o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s.current&&J(e.current,s.current)}),[i]),i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex align-items-center w-100 h-100 position-absolute"},r.a.createElement("canvas",{ref:e,style:{width:"850px",height:"650px"},className:"align-self-center mx-auto"}))):r.a.createElement(b.a,null,r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/create"},r.a.createElement("div",{className:"container-fluid text-center"},r.a.createElement("h1",null,"Catan Online"),r.a.createElement("p",null,"Please enter your username"),r.a.createElement(l.a,{initialValues:{username:""},onSubmit:g},(function(e){var t=e.handleChange,n=e.handleBlur,a=e.handleSubmit;return r.a.createElement("form",{className:"form-group w-75 mx-auto",onSubmit:a},r.a.createElement("label",{className:"font-weight-bold"},"Username"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",onChange:t,onBlur:n}),r.a.createElement("button",{className:"mt-2 btn btn-success",type:"submit"},"Create a Room"))})),r.a.createElement(b.b,{to:"/"},"Join a room"))),r.a.createElement(v.a,{path:"/",exact:!0},r.a.createElement("div",{className:"container-fluid text-center"},r.a.createElement("h1",null,"Catan Online"),r.a.createElement("p",null,"Please enter your room code and username"),r.a.createElement(l.a,{initialValues:{roomCode:"",username:""},onSubmit:y,validationSchema:p},(function(e){var t=e.handleChange,n=e.handleBlur,a=e.handleSubmit;return r.a.createElement("form",{className:"form-group w-75 mx-auto",onSubmit:a},r.a.createElement("label",{className:"font-weight-bold"},"Username"),r.a.createElement("input",{type:"username",name:"username",className:"form-control",onChange:t,onBlur:n}),r.a.createElement("label",{className:"font-weight-bold"},"Room Code"),r.a.createElement("input",{type:"text",name:"roomCode",className:"form-control",onChange:t,onBlur:n}),r.a.createElement("button",{className:"mt-2 btn btn-success",type:"submit"},"Submit"))})),r.a.createElement(b.b,{to:"/create"},"Create a room")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.66d2c265.chunk.js.map